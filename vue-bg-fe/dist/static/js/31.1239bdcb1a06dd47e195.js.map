{"version":3,"sources":["webpack:///./src/pages/orderManage/orderTimeOutStatistics.vue?7b71","webpack:///src/pages/orderManage/orderTimeOutStatistics.vue","webpack:///./src/pages/orderManage/orderTimeOutStatistics.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","_m","_v","staticClass","attrs","type","picker-options","pickerOptions","placeholder","on","change","$event","selectTime","model","value","callback","$$v","payTime","expression","statisticsList","option","orderTrend","staticRenderFns","computed","extendsfrom_dll_reference_vendor_library_default","Object","vuex_esmfrom_dll_reference_vendor_library","initView","Date","end","methods","_this","start","day","endInit","startInit","searchOptions","payTimeEnd","_checkEndTime","_nextOpts","then","setViewData","key","val","newList","payTimeStart","afterSale","vStatistics","Statistics","IEcharts","vue_echarts_default","a","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","orderTimeOutStatistics","orderTimeOutStatistics_default","__webpack_exports__"],"mappings":"2DAEAA,EAAAC,SAAkBC,OAFlB,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAJ,EAAAM,GAAA,GAAAN,EAAAO,GAAA,KAAAH,EAAA,OAAiDI,YAAA,YAAsBJ,EAAA,OAAYI,YAAA,iBAA2BJ,EAAA,OAAYI,YAAA,eAAyBJ,EAAA,QAAAJ,EAAAO,GAAA,WAAAP,EAAAO,GAAA,KAAAH,EAAA,kBAAgEK,OAAOC,KAAA,gBAAAC,iBAAAX,EAAAY,cAAAC,YAAA,UAAiFC,IAAKC,OAAA,SAAAC,GAA0BhB,EAAAiB,eAAkBC,OAAQC,MAAAnB,EAAA,QAAAoB,SAAA,SAAAC,GAA6CrB,EAAAsB,QAAAD,GAAgBE,WAAA,cAAuB,KAAAvB,EAAAO,GAAA,KAAAH,EAAA,gBAAuCK,OAAOe,eAAAxB,EAAAwB,kBAAqCxB,EAAAO,GAAA,KAAAH,EAAA,WAA4BI,YAAA,YAAsBJ,EAAA,YAAiBK,OAAOgB,OAAAzB,EAAA0B,eAAyB,UAErrBC,iBADlB,WAAoC,IAAazB,EAAbD,KAAaE,eAA0BC,EAAvCH,KAAuCI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBI,YAAA,UAAoBJ,EAAA,QAApGH,KAAoGM,GAAA,wMC0BxI,wBACAqB,SAAAC,OAAAC,OAAAC,EAAA,SAAAD,EAEA,iDAEAE,2CAGA,mCAIA,qCAEAC,WACAA,gBACA,iBACA,iBACA,eACA,gBACA,gBACA,mDAEAC,YAIA,sCAEAD,WACAA,gBACA,iBACA,iBACA,eACA,gBACA,gBACA,oDAEAC,YAIA,sCAEAD,WACAA,gBACA,iBACA,iBACA,eACA,gBACA,gBACA,oDAEAC,4BAMA,oBAGA,UAEA,eAEA,WAEA,gBAEA,WAIA,uCAEA,cAEA,qCAGA,SAEA,sCAMA,qBAEA,yBAEA,+BAKA,4EAWA,mCACA,uBACA,sBAGA,gBAEA,WACA,YACA,mBAEA,qDAUA,yBAGA,aACA,UAGA,kBAGA,kCAOA,iCAOA,qCASA,IACAC,QAAAN,OAAAC,OAAAC,EAAA,WAAAD,EACA,uDAEAE,gCAEA,IAAAI,EAAAnC,qDACA,mDACA,iFAEAoC,uEACAH,OACA,WACAD,WACAA,sCACA,cACA,iBACA,iBACA,eACA,gBACA,gBACA,+BACAK,mBACAC,yEACAC,uEACAD,qBAEAE,4BACAC,kBACAT,6GAIAU,6BACAC,GAAAC,KAAA,aAEAC,4CAIAd,4FAMAe,wBAIA,OACA,0BAIA,kCAGAC,UAEAA,UAGAC,kDAKA,QACA,aAEA,qBAGA,+CAEA,UAEA,kDAEA,UAEA,uDACA,SACA,6BAEA,OACA,eACA,YACA,sBACA,uBACA,oBACA,UAEA,eAqBA,iDACA,SACA,4BAEA,OACA,eACA,eACA,cACA,gBACA,mBACA,eACA,eACA,mCACAC,2CAKAR,mCACAS,gBACA,6CACA,wGACA,yGACA,4GACA,8GACA,oDACA,kBAIAC,YAAAC,EAAA,EAEAC,SAAAC,EAAAC,yBC9UA,IASAC,EAZA,SAAAC,GACAC,EAAA,SAgBAC,EAdAD,EAAA,OAcAE,CACAC,EACAC,EAAAP,GATA,EAWAC,EAPA,kBAEA,MAUAO,EAAA,QAAAJ,EAAA","file":"static/js/31.1239bdcb1a06dd47e195.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"section-item\"},[_c('div',{staticClass:\"block-item\"},[_c('span',[_vm._v(\"时间筛选：\")]),_vm._v(\" \"),_c('el-date-picker',{attrs:{\"type\":\"datetimerange\",\"picker-options\":_vm.pickerOptions,\"placeholder\":\"选择时间范围\"},on:{\"change\":function($event){_vm.selectTime()}},model:{value:(_vm.payTime),callback:function ($$v) {_vm.payTime=$$v},expression:\"payTime\"}})],1)]),_vm._v(\" \"),_c('v-statistics',{attrs:{\"statisticsList\":_vm.statisticsList}}),_vm._v(\" \"),_c('section',{staticClass:\"echarts\"},[_c('IEcharts',{attrs:{\"option\":_vm.orderTrend}})],1)],1)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"超时订单统计\")])])}]\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c8dc387c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/orderManage/orderTimeOutStatistics.vue\n// module id = h3Kl\n// module chunks = 31","<!--售后订单统计-->\r\n<template>\r\n  <div>\r\n    <div class=\"title\">\r\n      <span>超时订单统计</span>\r\n    </div>\r\n    <div class=\"section\">\r\n      <div class=\"section-item\">\r\n        <div class=\"block-item\">\r\n          <span>时间筛选：</span>\r\n          <el-date-picker @change=\"selectTime()\" v-model=\"payTime\" type=\"datetimerange\" :picker-options=\"pickerOptions\" placeholder=\"选择时间范围\" ></el-date-picker>\r\n        </div>\r\n      </div>\r\n      <v-statistics :statisticsList=\"statisticsList\" />\r\n      <section class=\"echarts\">\r\n        <IEcharts :option=\"orderTrend\"></IEcharts>\r\n      </section>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  import IEcharts from 'vue-echarts-v3';\r\n  import vStatistics from '@/components/tools/Statistics';\r\n//  import Util from '../../assets/js/common/utils'\r\n  import {mapState, mapActions} from 'vuex'\r\n  export default {\r\n    name: 'orderMarketStatistics',\r\n    computed: {\r\n      ...mapState(['afterSaleStatistics'])\r\n    },\r\n    created (){\r\n      this.initView()\r\n    },\r\n    data: () => ({\r\n      payTime:'',\r\n      pickerOptions: {\r\n        shortcuts: [\r\n          {\r\n            text: '最近一周',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              end.setHours(23)\r\n              end.setMinutes(59)\r\n              end.setSeconds(59)\r\n              start.setHours(0)\r\n              start.setMinutes(0)\r\n              start.setSeconds(0)\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 6);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          },\r\n          {\r\n            text: '最近半个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              end.setHours(23)\r\n              end.setMinutes(59)\r\n              end.setSeconds(59)\r\n              start.setHours(0)\r\n              start.setMinutes(0)\r\n              start.setSeconds(0)\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 14);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          },\r\n          {\r\n            text: '最近一个月',\r\n            onClick(picker) {\r\n              const end = new Date();\r\n              const start = new Date();\r\n              end.setHours(23)\r\n              end.setMinutes(59)\r\n              end.setSeconds(59)\r\n              start.setHours(0)\r\n              start.setMinutes(0)\r\n              start.setSeconds(0)\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 29);\r\n              picker.$emit('pick', [start, end]);\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      marketSearch: {\r\n        label:'7',\r\n        options:[\r\n          {\r\n            value:'7',\r\n            label:'最近一周'\r\n          },\r\n          {\r\n            value:'15',\r\n            label:'最近15日'\r\n          },\r\n          {\r\n            value:'30',\r\n            label:'最近一个月'\r\n          }\r\n        ]\r\n      },\r\n      searchOptions: {\r\n        payTimeStart:'',\r\n        payTimeEnd:'',\r\n      },\r\n      statisticsList:{\r\n        configs: {\r\n          itemNum:'',\r\n          width: ''\r\n        },\r\n        items:[]\r\n      },\r\n      orderTrend : {\r\n        title: {\r\n          text: ''\r\n        },\r\n        tooltip : {\r\n          trigger: 'axis',\r\n          axisPointer: {\r\n            type: 'cross',\r\n            label: {\r\n              backgroundColor: '#6a7985'\r\n            }\r\n          }\r\n        },\r\n        legend: {\r\n          data:[]\r\n        },\r\n//        toolbox: {\r\n//          feature: {\r\n//            saveAsImage: {}\r\n//          }\r\n//        },\r\n        toolbox: {\r\n          feature: {\r\n            dataView: {show: true, readOnly: false},\r\n            magicType: {show: true, type: ['line', 'bar']},\r\n            restore: {show: true},\r\n            saveAsImage: {show: true}\r\n          }\r\n        },\r\n        grid: {\r\n          left: '3%',\r\n          right: '4%',\r\n          bottom: '3%',\r\n          containLabel: true\r\n        },\r\n        xAxis : [\r\n          {\r\n            type : 'category',\r\n//            boundaryGap : false,\r\n            data : [],\r\n            axisPointer: {\r\n              type: 'shadow'\r\n            }\r\n          }\r\n        ],\r\n        yAxis : [\r\n          {\r\n            type : 'value',\r\n            name: '订单量',\r\n            min: 0,\r\n          }\r\n        ],\r\n        series : [\r\n          {\r\n            name:'全部订单',\r\n            type:'line',\r\n//            stack: '总量',\r\n//            areaStyle: {normal: {}},\r\n            data:[]\r\n          },\r\n          {\r\n            name:'超时发货',\r\n            type:'bar',\r\n//            stack: '总量',\r\n//            areaStyle: {normal: {}},\r\n            data:[]\r\n          },\r\n          {\r\n            name:'待发货',\r\n            type:'bar',\r\n//            stack: '总量',\r\n//            areaStyle: {normal: {}},\r\n            data:[]\r\n          },\r\n        ]\r\n      },\r\n      maxValue:0,\r\n    }),\r\n    methods: {\r\n      ...mapActions(['getDeliveryStatistic']),\r\n      searchSubmit() {\r\n        this.initView();\r\n      },\r\n      initView() {\r\n        const start = this.payTime ? (this.payTime[0] ? this.payTime[0] : '') : ''\r\n        const end = this.payTime ? (this.payTime[1] ? this.payTime[1] : '') : ''\r\n        if(start && end){\r\n          this.searchOptions.payTimeStart = Util.formatDate('yyyy-mm-dd hh:mm:ss',start)\r\n          this.searchOptions.payTimeEnd = Util.formatDate('yyyy-mm-dd hh:mm:ss',end)\r\n        } else {\r\n          const endInit = new Date();\r\n          const startInit = new Date();\r\n          const day = Number(this.marketSearch.label-1);\r\n          endInit.setHours(23)\r\n          endInit.setMinutes(59)\r\n          endInit.setSeconds(59)\r\n          startInit.setHours(0)\r\n          startInit.setMinutes(0)\r\n          startInit.setSeconds(0)\r\n          startInit.setTime(startInit.getTime() - 3600 * 1000 * 24 * day);\r\n          this.payTime = [startInit,endInit]\r\n          this.searchOptions.payTimeStart = Util.formatDate('yyyy-mm-dd hh:mm:ss',startInit)\r\n          this.searchOptions.payTimeEnd = Util.formatDate('yyyy-mm-dd hh:mm:ss',endInit)\r\n        }\r\n        let _nextOpts = Object.assign({},this.searchOptions)\r\n        let _checkEndTime = new Date(_nextOpts.payTimeEnd),\r\n            _checkNowTime = new Date()\r\n        if(_checkEndTime.getTime() > _checkNowTime.getTime()){\r\n           _checkEndTime.setTime(_checkNowTime.getTime() - 3600 * 1000 / 2)\r\n        }\r\n        _nextOpts.payTimeEnd = Util.formatDate('yyyy-mm-dd hh:mm:ss',_checkEndTime)\r\n        this.getDeliveryStatistic(_nextOpts)\r\n          .then(() => {\r\n            this.setViewData()\r\n          })\r\n      },\r\n      selectTime() {\r\n        this.initView()\r\n      },\r\n      getOrderTrendData(list,key){\r\n        let newList = [];\r\n        if(key == 'day'){\r\n          for(let i in list){\r\n            newList.push(list[i][key])\r\n          }\r\n        }\r\n        else{\r\n          for(let i in list){\r\n            let val = 0\r\n            if(list[i]){\r\n              val = list[i][key] ? list[i][key] : 0\r\n            } else{\r\n              val = 0\r\n            }\r\n            if(this.maxValue < val){\r\n              this.maxValue = val\r\n            }\r\n            newList.push(val)\r\n          }\r\n        }\r\n        return newList\r\n      },\r\n      setViewData() {\r\n        const afterSale = {\r\n          configs:{\r\n            itemNum: 4,\r\n            width: '250px',\r\n            sort: 'end'\r\n          },\r\n          items:[\r\n            {\r\n              label: '订单总数',\r\n              val: this.afterSaleStatistics.totalCount+0\r\n            },\r\n            {\r\n              label: '准时发货',\r\n              val: this.afterSaleStatistics.noExpireCount+0,\r\n            },\r\n            {\r\n              label: '超时发货',\r\n              val: this.afterSaleStatistics.expireAndSendCount+0,\r\n              router:'/order/timeOut',\r\n              query:{\r\n                page:1,\r\n                rows:20,\r\n                orderNumber:'',\r\n                sellerId:'all',\r\n                isAllowComplain:'1',\r\n                penaltyAmountStart:'',\r\n                penaltyAmountEnd:'',\r\n                status:'all'\r\n              }\r\n            },\r\n//            {\r\n//              label: '超时未发货',\r\n//              val: this.afterSaleStatistics.expireAndNoSendCount+0,\r\n//              router:'/orderSearch',\r\n//              query:{\r\n//                page:1,\r\n//                rows:20,\r\n//                orderNumber:'',\r\n//                orderStatus:'2',\r\n//                orderType:'',\r\n//                freezeStatus:'',\r\n//                logisticsNumber:'',\r\n//                productCode:'',\r\n//                productName:'',\r\n//                payTimeStart:this.searchOptions.payTimeStart,\r\n//                payTimeEnd:this.searchOptions.payTimeEnd\r\n//              }\r\n//            },\r\n            {\r\n              label: '待发货',\r\n              val: this.afterSaleStatistics.waitSendCount+0,\r\n              router:'/order/search',\r\n              query:{\r\n                page:1,\r\n                rows:20,\r\n                orderNumber:'',\r\n                orderStatus:'2',\r\n                orderType:'',\r\n                freezeStatus:'',\r\n                logisticsNumber:'',\r\n                productCode:'',\r\n                productName:'',\r\n                payTimeStart:this.searchOptions.payTimeStart,\r\n                payTimeEnd:this.searchOptions.payTimeEnd\r\n              }\r\n            },\r\n          ]\r\n        }\r\n        this.statisticsList = afterSale\r\n        this.maxValue = 0\r\n        this.orderTrend.legend.data = ['全部订单','超时发货','待发货']\r\n        this.orderTrend.xAxis[0].data = this.getOrderTrendData(this.afterSaleStatistics.orderDayStatistics,'day')\r\n        this.orderTrend.series[0].data = this.getOrderTrendData(this.afterSaleStatistics.orderDayStatistics,'total')\r\n        this.orderTrend.series[1].data = this.getOrderTrendData(this.afterSaleStatistics.expireDayStatistics,'total')\r\n        this.orderTrend.series[2].data = this.getOrderTrendData(this.afterSaleStatistics.waitSendDayStatistics,'total')\r\n        this.orderTrend.yAxis[0].max = this.maxValue + 20\r\n      },\r\n    },\r\n    components: {\r\n      vStatistics,\r\n      IEcharts\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang='less' rel=\"stylesheet/less\">\r\n  .echarts {\r\n    width: auto;\r\n    height: 400px;\r\n    margin: 0 auto;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/orderManage/orderTimeOutStatistics.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c8dc387c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./orderTimeOutStatistics.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderTimeOutStatistics.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderTimeOutStatistics.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c8dc387c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./orderTimeOutStatistics.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c8dc387c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/orderManage/orderTimeOutStatistics.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}