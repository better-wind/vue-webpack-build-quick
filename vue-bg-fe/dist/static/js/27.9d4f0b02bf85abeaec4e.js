webpackJsonp([27],{D9VU:function(t,e){},mLM5:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("woOf"),a=i.n(s),r=i("Dd8w"),n=i.n(r),o=i("u5GG"),c=i.n(o),d=i("uYCK"),m=i("NYxO"),l={name:"orderMarketStatistics",computed:n()({},Object(m.d)(["afterSaleStatistics"])),created:function(){this.initView()},data:function(){return{payTime:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,i=new Date;e.setHours(23),e.setMinutes(59),e.setSeconds(59),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setTime(i.getTime()-5184e5),t.$emit("pick",[i,e])}},{text:"最近半个月",onClick:function(t){var e=new Date,i=new Date;e.setHours(23),e.setMinutes(59),e.setSeconds(59),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setTime(i.getTime()-12096e5),t.$emit("pick",[i,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,i=new Date;e.setHours(23),e.setMinutes(59),e.setSeconds(59),i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setTime(i.getTime()-25056e5),t.$emit("pick",[i,e])}}]},marketSearch:{label:"7",options:[{value:"7",label:"最近一周"},{value:"15",label:"最近15日"},{value:"30",label:"最近一个月"}]},searchOptions:{payTimeStart:"",payTimeEnd:""},statisticsList:{configs:{itemNum:"",width:""},items:[]},orderTrend:{title:{text:""},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:[]},toolbox:{feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:[],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"订单量",min:0}],series:[{name:"全部订单",type:"line",data:[]},{name:"超时发货",type:"bar",data:[]},{name:"待发货",type:"bar",data:[]}]},maxValue:0}},methods:n()({},Object(m.b)(["getDeliveryStatistic"]),{searchSubmit:function(){this.initView()},initView:function(){var t=this,e=this.payTime&&this.payTime[0]?this.payTime[0]:"",i=this.payTime&&this.payTime[1]?this.payTime[1]:"";if(e&&i)this.searchOptions.payTimeStart=Util.formatDate("yyyy-mm-dd hh:mm:ss",e),this.searchOptions.payTimeEnd=Util.formatDate("yyyy-mm-dd hh:mm:ss",i);else{var s=new Date,r=new Date,n=Number(this.marketSearch.label-1);s.setHours(23),s.setMinutes(59),s.setSeconds(59),r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setTime(r.getTime()-864e5*n),this.payTime=[r,s],this.searchOptions.payTimeStart=Util.formatDate("yyyy-mm-dd hh:mm:ss",r),this.searchOptions.payTimeEnd=Util.formatDate("yyyy-mm-dd hh:mm:ss",s)}var o=a()({},this.searchOptions),c=new Date(o.payTimeEnd),d=new Date;c.getTime()>d.getTime()&&c.setTime(d.getTime()-18e5),o.payTimeEnd=Util.formatDate("yyyy-mm-dd hh:mm:ss",c),this.getDeliveryStatistic(o).then(function(){t.setViewData()})},selectTime:function(){this.initView()},getOrderTrendData:function(t,e){var i=[];if("day"==e)for(var s in t)i.push(t[s][e]);else for(var a in t){var r=0;r=t[a]&&t[a][e]?t[a][e]:0,this.maxValue<r&&(this.maxValue=r),i.push(r)}return i},setViewData:function(){var t={configs:{itemNum:4,width:"250px",sort:"end"},items:[{label:"订单总数",val:this.afterSaleStatistics.totalCount+0},{label:"准时发货",val:this.afterSaleStatistics.noExpireCount+0},{label:"超时发货",val:this.afterSaleStatistics.expireAndSendCount+0,router:"/order/timeOut",query:{page:1,rows:20,orderNumber:"",sellerId:"all",isAllowComplain:"1",penaltyAmountStart:"",penaltyAmountEnd:"",status:"all"}},{label:"待发货",val:this.afterSaleStatistics.waitSendCount+0,router:"/order/search",query:{page:1,rows:20,orderNumber:"",orderStatus:"2",orderType:"",freezeStatus:"",logisticsNumber:"",productCode:"",productName:"",payTimeStart:this.searchOptions.payTimeStart,payTimeEnd:this.searchOptions.payTimeEnd}}]};this.statisticsList=t,this.maxValue=0,this.orderTrend.legend.data=["全部订单","超时发货","待发货"],this.orderTrend.xAxis[0].data=this.getOrderTrendData(this.afterSaleStatistics.orderDayStatistics,"day"),this.orderTrend.series[0].data=this.getOrderTrendData(this.afterSaleStatistics.orderDayStatistics,"total"),this.orderTrend.series[1].data=this.getOrderTrendData(this.afterSaleStatistics.expireDayStatistics,"total"),this.orderTrend.series[2].data=this.getOrderTrendData(this.afterSaleStatistics.waitSendDayStatistics,"total"),this.orderTrend.yAxis[0].max=this.maxValue+20}}),components:{vStatistics:d.a,IEcharts:c.a}},h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("div",{staticClass:"section"},[i("div",{staticClass:"section-item"},[i("div",{staticClass:"block-item"},[i("span",[t._v("时间筛选：")]),t._v(" "),i("el-date-picker",{attrs:{type:"datetimerange","picker-options":t.pickerOptions,placeholder:"选择时间范围"},on:{change:function(e){t.selectTime()}},model:{value:t.payTime,callback:function(e){t.payTime=e},expression:"payTime"}})],1)]),t._v(" "),i("v-statistics",{attrs:{statisticsList:t.statisticsList}}),t._v(" "),i("section",{staticClass:"echarts"},[i("IEcharts",{attrs:{option:t.orderTrend}})],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("超时订单统计")])])}]};var u=i("VU/8")(l,h,!1,function(t){i("D9VU")},"data-v-c8dc387c",null);e.default=u.exports}});
//# sourceMappingURL=27.9d4f0b02bf85abeaec4e.js.map