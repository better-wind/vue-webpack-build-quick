webpackJsonp([34],{IeBM:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("Dd8w"),s=i.n(l),a=i("jKIa"),r=i("NYxO"),o={name:"productEdit",created:function(){this.initDetail()},computed:s()({},Object(r.d)(["categoryList"])),data:function(){return{productImageDialog:{isShow:!1,url:""},copyProductId:"",productCheckContent:!0,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5+1728e5}},productImgKeyList:["image1","image2","image3","image4","image5"],productImgList:[],modal:{isShow:!1,opts:{sellerProductId:"",price:"",enableDay:"",reason:""}},rules:{price:[{required:!0,message:"请输入供货价",trigger:"blur"}],enableDay:[{type:"string",required:!0,message:"请输入待启用时间",trigger:"change"}],reason:[{required:!0,message:"请输入调价原因",trigger:"blur"}]},tableWholesale:{isShow:!1,list:[]},tableWholesaleMap:{type:{0:"提价",1:"降价"},status:{0:"待审核",1:"未通过",2:"通过"}},editType:"",menuList:[],disabledEdit:!0,disabledHouse:!1,wholesalePriceConfig:{disabledEdit:!0,disabledApple:!1},categoryConfig:{type:"Detail",label:{items:[]},mapModel:[]},productConfig:{items:[{title:"基本信息",items:[{label:"商品分类",type:"cate",required:!0,position:!0,items:[{key:"categoryList"}]},{label:"商品名称",required:!0,items:[{type:"input-house",placeholder:"名称不合规范不能通过审核！规范【口味】+【份数】+国家(国内不写)+品牌+品名+规格+卖点！44字内",style:"",width:"600",key:"name",maxlength:44},{type:"sign-tip",label:"例如：【青苹果味】【5包装】日本进口卡乐比黄油薯片108g/包 追剧最爱 无法拒绝的美味",layout:"br"}]},{label:"卖点",required:!0,position:!0,items:[{type:"textarea",placeholder:"如果卖点不明显，将不能通过审核！字数限制60—140字",style:"",key:"sellingPoint",maxlength:140}]},{label:"品牌",required:!0,items:[{type:"select-filterable",placeholder:"请填写品牌",style:"",key:"brandId",options:[]}]},{label:"国家信息",required:!0,items:[{type:"select",placeholder:"请填写国家信息",style:"",key:"saleFlagId",options:[]}]},{label:"商品条码",required:!0,items:[{type:"input-house",placeholder:"请填写商品条码",style:"",key:"barcode"}]},{label:"供货价",required:!0,items:[{type:"input-whole",placeholder:"请填写供货价",style:"",key:"wholesalePrice"},{type:"button",placeholder:"调整供货价",style:"primary",key:"",editType:"edit-whole",name:"checkWholesaleAudit"},{type:"button",placeholder:"调价记录",style:"",key:"",editType:"edit-whole",name:"callGetWholesale"}]},{label:"市场价",required:!0,items:[{type:"input",placeholder:"请填写市场价",style:"",key:"proposalMarketPrice"}]},{label:"建议售价",required:!0,items:[{type:"input",placeholder:"请填写建议售价",style:"",key:"proposalPrice"}]},{label:"发货地",required:!0,items:[{type:"select-freight",placeholder:"请选择发货地",style:"",key:"useSellerSendAddress",options:[]},{type:"button",placeholder:"管理发货地",style:"primary",key:"",name:"managerFreightTemplateId"}]},{label:"运费模板",items:[{type:"freightMsg"}]},{label:"发货编码",required:!0,items:[{type:"input-house",placeholder:"请填写发货编码",style:"",key:"code"}]},{label:"区域限制",required:!0,items:[{type:"select",placeholder:"请选择配送模板",style:"",key:"sellerDeliverAreaTemplateId",options:[]},{type:"button",placeholder:"管理配送模板",style:"primary",key:"",name:"managerDeliverAreaTemplateId"}]}]},{title:"详细信息",items:[{label:"规格",required:!0,items:[{type:"input",placeholder:"数值+单位/单位*份数（两份及以上必须填写）",style:"",key:"netVolume"},{type:"sign-tip",label:"例如：100g／包，108g/包*5"}]},{label:"毛重",required:!0,items:[{type:"input",placeholder:"请填写毛重(克)",style:"",key:"grossWeight"},{type:"sign-tip",label:"注：以g为单位，只需填写数字"}]},{label:"产地",required:!0,items:[{type:"input",placeholder:"国内具体到省份，国外写明国家名称",style:"",key:"placeOfOrigin"}]},{label:"储存方式",items:[{type:"input",placeholder:"根据实际情况填写，例如：常温储存、冷冻储存",style:"",key:"storageMethod"}]},{label:"保质期",items:[{type:"input",placeholder:"必须填写具体时长，例如：12个月、365天",style:"",key:"durabilityPeriod"},{type:"sign-tip",label:"注意：如只有到期日，可参考效期推断具体保质期时长"}]},{label:"有效期至",required:!0,items:[{type:"date-picker",placeholder:"请填写有效期",style:"",key:"expireDate"}]},{label:"生产日期",items:[{type:"date-picker",placeholder:"请填写生产日期",style:"",key:"manufacturerDate"}]},{label:"适用人群",items:[{type:"input",placeholder:"请填写适用人群",style:"",key:"peopleFor"}]},{label:"食用方法",items:[{type:"input",placeholder:"与使用方法至少选择一个填写，30字以内",style:"",key:"foodMethod"}]},{label:"使用方式",items:[{type:"input",placeholder:"与食用方法至少选择一个填写，30字以内",style:"",key:"useMethod"}]},{label:"温馨提示",items:[{type:"input",placeholder:"请填写温馨提示",style:"",key:"tip"}]}]}]},productDetail:{},detailConfig:{},productEdit:{sellerProduct:{id:"",brandId:"",sellerId:"",sellerDeliverAreaTemplateId:"",useSellerSendAddress:"",code:"",barcode:"",name:"",wholesalePrice:"",proposalMarketPrice:"",proposalPrice:"",sellingPoint:"",saleFlagId:"",netVolume:"",grossWeight:"",placeOfOrigin:"",manufacturerDate:"",storageMethod:"",durabilityPeriod:"",peopleFor:"",foodMethod:"",useMethod:"",tip:"",expireDate:"",image1:"",image2:"",image3:"",image4:"",image5:"",categoryList:[]},detailList:[]},picUpload:{picFile:null,getSize:1},picUploadWidth:{picFile:null,getSize:1,width:620},picUploadList:{picFiles:[],getSize:1},checkSubmit:[],detailRemoveList:[],startRemoveListLength:0,isSelectFreight:!1,productFreightTemplate:{},latestWholesale:{}}},methods:s()({},Object(r.b)(["getProductDetail","setCategoryList","saveProductDetail","getDistributionTemplate","getDeliveryArea","getSellerBrand","getCountryList","checkUnAuditWholesale","getLatestWholesale","changeWholesale","getWholesale","withdrawAudit","deleteProduct","callSetNotice","getProductFreightTemplate"]),{initDetail:function(){var e=this,t={sellerProductId:this.$route.query.productId};this.setCategoryList([]);var i=this.$route.query.type;this.getDeliveryArea({isAvailable:1}).then(function(t){var i=[];t.forEach(function(e,t){var l={label:e.sendAddress,value:e.id};i.push(l)}),e.productConfig.items[0].items[9].items[0].options=i}),this.getDistributionTemplate().then(function(t){var i=[];t.forEach(function(e,t){var l={label:e.name,value:e.id};i.push(l)}),e.productConfig.items[0].items[12].items[0].options=i}),this.getSellerBrand().then(function(t){var i=[];t.forEach(function(e,t){var l={label:e.name,value:e.id};i.push(l)}),e.productConfig.items[0].items[3].items[0].options=i}),this.getCountryList().then(function(t){var i=[];t.forEach(function(e,t){var l={label:e.name,value:e.id};i.push(l)}),e.productConfig.items[0].items[4].items[0].options=i}),"edit"==i?(this.editType="edit",this.callGetProductDetail(t,"edit")):(this.editType="new",this.addCate(),this.disabledEdit=!1,this.wholesalePriceConfig.disabledEdit=!1,this.menuList=["1","2"]),this.initCheckSubmit()},callGetProductDetail:function(e,t){var i=this;this.getProductDetail(e).then(function(e){i.productDetail=e,i.editProductInit(t)})},editProductInit:function(e){if(this.productImgList=[],"new"==e){this.setCategoryList([]),this.productDetail.id=""}for(var t in this.productEdit.sellerProduct)this.productEdit.sellerProduct[t]=this.productDetail[t]||0==this.productDetail[t]?this.productDetail[t]:"";for(var i in this.productImgKeyList)this.productEdit.sellerProduct[this.productImgKeyList[i]]&&this.productImgList.push(this.productEdit.sellerProduct[this.productImgKeyList[i]]);this.productEdit.detailList=this.productDetail.detailList?this.productDetail.detailList:[],this.startRemoveListLength=this.productEdit.detailList.length;var l=this;setTimeout(function(){l.setCategoryList(l.productEdit.sellerProduct.categoryList)},10),"edit"==e&&(this.disabledEdit=!0,this.disabledHouse=!1,this.wholesalePriceConfig.disabledEdit=!0,this.wholesalePriceConfig.disabledApple=!1,1==this.productDetail.saleStatus?1==this.productDetail.status?(this.wholesalePriceConfig.disabledApple=!0,this.disabledEdit=!1,this.menuList=["2"]):2==this.productDetail.status?this.menuList=["3"]:3==this.productDetail.status?(this.wholesalePriceConfig.disabledEdit=!1,this.disabledEdit=!1,this.menuList=["1","2","4"]):4==this.productDetail.status&&(this.wholesalePriceConfig.disabledApple=!0,this.disabledEdit=!1,this.menuList=["2"]):0==this.productDetail.saleStatus&&(1==this.productDetail.status?(this.wholesalePriceConfig.disabledEdit=!!this.productDetail.productSourceSellerId,this.wholesalePriceConfig.disabledApple=!!this.productDetail.productSourceSellerId,this.disabledEdit=!1,this.menuList=["1","2","4"]):2==this.productDetail.status?this.menuList=["3"]:3==this.productDetail.status?(this.productDetail.productSourceSellerId?(this.wholesalePriceConfig.disabledEdit=!0,this.wholesalePriceConfig.disabledApple=!0):this.wholesalePriceConfig.disabledEdit=!1,this.disabledEdit=!1,this.menuList=["1","2","4"]):4==this.productDetail.status&&(this.wholesalePriceConfig.disabledApple=!0,this.disabledEdit=!1,this.menuList=["2"])),this.productDetail.isInStorage&&(this.disabledHouse=!0))},selectFreight:function(e){var t=this;this.isSelectFreight=!0,this.getProductFreightTemplate({shippAddressId:e}).then(function(e){t.productFreightTemplate=e})},checkDate:function(e,t){"detail"==t?this.productEdit.sellerProduct[e]=Util.formatDate("yyyy-mm-dd hh:mm:ss",this.productEdit.sellerProduct[e]):"enableDay"==t&&(this.modal.opts[e]=Util.formatDate("yyyy-mm-dd hh:mm:ss",this.modal.opts[e]))},initCheckSubmit:function(){var e=[];this.productConfig.items.forEach(function(t,i){t.items.forEach(function(t,i){if(t.required){var l={key:t.items[0].key,label:t.label};"有效期至"==l.label&&(l.label="有效期"),e.push(l)}})}),this.checkSubmit=e},addCate:function(){if(this.categoryList.length>=3){return this.getNotice("最多有三个商品类目"),!1}var e={id:"",sellerProductId:this.productEdit.sellerProduct.id,categoryFirstId:"",categorySecondId:"",categoryThirdId:""},t=this.categoryList;t.push(e),this.setCategoryList(t)},addDel:function(e){if(this.categoryList.length<=1){return this.getNotice("最少有一个商品类目"),!1}var t=this.categoryList;t.splice(e,1),this.setCategoryList([]);var i=this;setTimeout(function(){i.setCategoryList(t)},10)},handleDetailSuccess:function(e,t){if(1!=e.status)return this.getNotice(t.name+"图片上传失败"),!1;e.width;var i={id:"",sellerProductId:this.productEdit.sellerProduct.id,content:e.url,height:e.height,width:e.width};for(var l in this.detailRemoveList)if(this.detailRemoveList[l].uid==t.uid){var s=Number(this.startRemoveListLength)+Number(l);this.productEdit.detailList[s]=i,this.productEdit.detailList.push(""),this.productEdit.detailList.pop()}},handleDetailRemove:function(e,t){var i=0,l=0;for(var s in this.detailRemoveList)this.detailRemoveList[s].uid==e.uid&&(i=Number(this.startRemoveListLength)+Number(s),l=Number(s));this.detailRemoveList.splice(l,1),this.productEdit.detailList.splice(i,1)},delDetailImg:function(){this.$refs.detailUpload.clearFiles(),this.startRemoveListLength=0,this.productEdit.detailList=[]},beforeDetailUpload:function(e,t){var i="image/jpeg"===e.type||"image/png"===e.type,l=e.size/1024<400;return i||this.getNotice("上传图片格式不正确"),l||this.getNotice("上传图片大小不能超过 400KB!"),i&&l&&(this.picUploadWidth.picFile=e,this.detailRemoveList.push(e)),i&&l},handleAvatarSuccess:function(e,t){return 1!=e.status?(this.getNotice(t.name+"图片上传失败"),!1):640!=e.width||640!=e.height?(this.getNotice("图片尺寸不正确"),!1):void this.productImgList.push(e.url)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,i=e.size/1024<400;return t||this.getNotice("上传图片格式不正确"),i||this.getNotice("上传头像图片大小不能超过 400KB!"),this.picUpload.picFile=e,t&&i},handleRemove:function(e,t){},handlePreview:function(e){},saveProduct:function(e){this.productEdit.sellerProduct.categoryList=this.categoryList;var t=this.productEdit;t.needAudit=e,this.checkItem(t)},checkItem:function(e){var t=this,i="";for(var l in e.sellerProduct.categoryList)if(!e.sellerProduct.categoryList[l].categoryFirstId||!e.sellerProduct.categoryList[l].categorySecondId||!e.sellerProduct.categoryList[l].categoryThirdId)return i="请选择商品类目",this.getNotice(i),!1;for(var s in this.checkSubmit)if(""===e.sellerProduct[this.checkSubmit[s].key]||!e.sellerProduct[this.checkSubmit[s].key])return i=this.checkSubmit[s].label,this.getNotice("请填写"+i),!1;if(Number(e.sellerProduct.wholesalePrice)>=Number(e.sellerProduct.proposalPrice))return i="供货价需小于建议售价",this.getNotice(i),!1;if(Number(e.sellerProduct.proposalPrice)>=Number(e.sellerProduct.proposalMarketPrice))return i="建议售价需小于市场价",this.getNotice(i),!1;if(e.sellerProduct.name.length>44)return i="商品名称字数限制为44以内",this.getNotice(i),!1;if(e.sellerProduct.sellingPoint.length>140||e.sellerProduct.sellingPoint.length<60)return i="商品卖点字数限制为60~140",this.getNotice(i),!1;if(e.sellerProduct.barcode&&e.sellerProduct.barcode.indexOf("%")>-1)return i="商品条码内不能有%",this.getNotice(i),!1;if(e.sellerProduct.barcode.length>32)return i="商品条码小于32个字符",this.getNotice(i),!1;var a=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]/gi;if(e.sellerProduct.barcode&&e.sellerProduct.barcode.match(a))return i="商品条码格式不正确不能包含中文",this.getNotice(i),!1;if(e.sellerProduct.code&&e.sellerProduct.code.match(a))return i="发货编码格式不正确不能包含中文",this.getNotice(i),!1;var r=/^[0-9]{1}[0-9]*(\.[0-9]{1,2})?$/g;if(!(e.sellerProduct.wholesalePrice+"").match(r))return i="供货价格式不正确",this.getNotice(i),!1;if(!(e.sellerProduct.proposalMarketPrice+"").match(r))return i="市场价价格式不正确",this.getNotice(i),!1;if(!(e.sellerProduct.proposalPrice+"").match(r))return i="建议零售价格式不正确",this.getNotice(i),!1;if(!(e.sellerProduct.grossWeight+"").match(/^[1-9]{1}[0-9]*$/g))return i="毛重格式不正确",this.getNotice(i),!1;if(this.productImgList.length<2)return i="商品主图2-5张",this.getNotice(i),!1;for(var o in this.productImgKeyList)e.sellerProduct[this.productImgKeyList[o]]=this.productImgList[o]?this.productImgList[o]:"";if(e.detailList.length<1)return i="请上传商品详情图片",this.getNotice(i),!1;var d=[];e.detailList.map(function(e){e&&d.push(e)}),e.detailList=d,e.sellerProduct.sellerId=e.sellerProduct.useSellerSendAddress,this.saveProductDetail(e).then(function(){t.$router.back()})},checkWholesaleAudit:function(){var e=this,t={sellerProductId:this.productEdit.sellerProduct.id};this.checkUnAuditWholesale(t).then(function(t){t?e.$confirm("存在未审核调价申请，是否确认提交","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.callChangeWholesale()}).catch(function(){}):e.callChangeWholesale()})},callChangeWholesale:function(){var e=this,t={sellerProductId:this.productEdit.sellerProduct.id};this.getLatestWholesale(t).then(function(t){e.latestWholesale=t,e.modal.isShow=!0})},cancelModal:function(){this.modal.isShow=!1,this.tableWholesale.isShow=!1},submitModal:function(e){var t=this,i=this.modal.opts;i.sellerProductId=this.productEdit.sellerProduct.id,this.$refs[e].validate(function(e){if(!e)return!1;t.changeWholesale(i).then(function(){t.cancelModal();var e={sellerProductId:t.productEdit.sellerProduct.id};t.callGetProductDetail(e,"edit")})})},callGetWholesale:function(){var e=this,t={rowsPerPage:100,pageIndex:1,paramsMap:{sellerProductId:this.productEdit.sellerProduct.id}};this.getWholesale(t).then(function(t){e.tableWholesale.list=t.rows,e.tableWholesale.isShow=!0})},delProductImage:function(e){this.productImgList.splice(e,1)},showProductImage:function(e){this.productImageDialog.url=e,this.productImageDialog.isShow=!0},callsWithdrawAudit:function(){var e=this,t={sellerProductId:this.productEdit.sellerProduct.id};this.$confirm("确认撤回审核吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.withdrawAudit(t).then(function(){var t={sellerProductId:e.productEdit.sellerProduct.id};e.callGetProductDetail(t,"edit")})}).catch(function(){})},callDeleteProduct:function(){var e=this,t={sellerProductId:this.productEdit.sellerProduct.id};this.$confirm("确认删除商品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){e.deleteProduct(t).then(function(){e.$router.back()})}).catch(function(){})},copyProduct:function(){var e={sellerProductId:this.copyProductId};if(!this.copyProductId)return this.getNotice("商品ID不能为空"),!1;this.callGetProductDetail(e,"new"),this.productCheckContent=!1},getNotice:function(e){this.$alert(e,"提示",{confirmButtonText:"确定",callback:function(){}})}}),components:{vCate:a.a}},d=i("iFYQ"),c=i.n(d);var n=function(e){i("m+pJ")},u=i("VU/8")(o,c.a,!1,n,"data-v-beb18b22",null);t.default=u.exports},iFYQ:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"title"},["new"==e.editType?i("span",[e._v("新建商品")]):i("span",[e._v("商品编辑")]),e._v(" "),"new"==e.editType?[i("div",{staticClass:"copy-wrap"},[i("el-input",{staticClass:"input-item",attrs:{placeholder:"商品ID",size:"small"},model:{value:e.copyProductId,callback:function(t){e.copyProductId=t},expression:"copyProductId"}}),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.copyProduct()}}},[e._v("复制")])],1)]:e._e()],2),e._v(" "),i("div",{staticClass:"section"},[3==e.productDetail.status&&e.productCheckContent?i("div",{staticClass:"section-item",staticStyle:{"padding-top":"0"}},[i("div",{staticClass:"block-item"},[e._v("\n        审核未通过原因:"+e._s(e.productDetail.checkContent)+"\n      ")])]):e._e(),e._v(" "),e._m(0),e._v(" "),e._l(e.productConfig.items,function(t){return i("div",{staticClass:"section-item"},[i("div",{staticClass:"section-title"},[i("span",[e._v(e._s(t.title))])]),e._v(" "),e._l(t.items,function(t){return i("div",{staticClass:"block-item"},[t.position?i("div",{staticClass:"section-item-sign-wrap",staticStyle:{"margin-right":"4px"}},["cate"==t.type?i("span",{staticClass:"section-item-sign section-item-sign-padding"},[t.required?i("span",{staticClass:"sign-required"},[e._v("*")]):e._e(),e._v(e._s(t.label)+"：\n          ")]):i("span",{staticClass:"section-item-sign"},[t.required?i("span",{staticClass:"sign-required"},[e._v("*")]):e._e(),e._v(e._s(t.label)+"：\n          ")])]):i("span",{staticClass:"section-item-sign"},[t.required?i("span",{staticClass:"sign-required"},[e._v("*")]):e._e(),e._v(e._s(t.label)+"：\n        ")]),e._v(" "),"cate"==t.type?[i("div",{staticClass:"inline-item"},e._l(e.categoryList,function(t,l){return i("div",[i("v-cate",{attrs:{disabledEdit:e.disabledEdit,categoryDetail:t,cateIdx:l,categoryConfig:e.categoryConfig}}),e._v(" "),i("el-button",{attrs:{type:"primary",disabled:e.disabledEdit,size:"small"},on:{click:function(t){e.addCate()}}},[e._v("增加")]),e._v(" "),i("el-button",{attrs:{size:"small",disabled:e.disabledEdit},on:{click:function(t){e.addDel(l)}}},[e._v("删除")])],1)}))]:e._e(),e._v(" "),e._l(t.items,function(t){return["input"==t.type?i("el-input",{staticClass:"input-item-large",style:t.width?"width:"+t.width+"px":"",attrs:{disabled:e.disabledEdit,placeholder:t.placeholder,size:"small"},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}}):"input-house"==t.type?i("el-input",{staticClass:"input-item-large",style:t.width?"width:"+t.width+"px":"",attrs:{maxlength:t.maxlength?t.maxlength:1e3,disabled:e.disabledEdit||e.disabledHouse,placeholder:t.placeholder,size:"small"},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}}):"input-whole"==t.type?i("el-input",{staticClass:"input-item-large",attrs:{disabled:e.wholesalePriceConfig.disabledEdit,placeholder:t.placeholder,size:"small"},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}}):"textarea"==t.type?i("el-input",{staticClass:"area-item-large",attrs:{maxlength:t.maxlength?t.maxlength:1e3,rows:6,resize:"none",disabled:e.disabledEdit,placeholder:t.placeholder,type:"textarea",size:"small"},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}}):"select"==t.type?i("el-select",{staticClass:"input-item",attrs:{disabled:e.disabledEdit,placeholder:t.placeholder,size:"small"},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}},[e._l(t.options,function(e){return[i("el-option",{attrs:{label:e.label,value:e.value}})]})],2):"select-filterable"==t.type?i("el-select",{staticClass:"input-item",attrs:{filterable:"",disabled:e.disabledEdit,placeholder:t.placeholder,size:"small"},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}},[e._l(t.options,function(e){return[i("el-option",{attrs:{label:e.label,value:e.value}})]})],2):"select-freight"==t.type?i("el-select",{staticClass:"input-item",attrs:{disabled:e.disabledEdit||"edit"==e.editType&&e.productDetail.productSourceSellerId>0,placeholder:t.placeholder,size:"small"},on:{change:e.selectFreight},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}},[e._l(t.options,function(e){return[i("el-option",{attrs:{label:e.label,value:e.value}})]})],2):"freightMsg"==t.type?[e.isSelectFreight?i("span",{class:e.disabledEdit?"disabled-color":""},[e.productFreightTemplate.freightTemplateName?i("span",[e._v("【"+e._s(e.productFreightTemplate.freightTemplateName)+"】")]):e._e(),e._v(" "),2==e.productFreightTemplate.freightSubmitType?i("span",[e._v("\n                (按重量、配送区域计价)\n              ")]):1==e.productFreightTemplate.freightSubmitType?i("span",[e._v("\n                (每订单运费"+e._s(e.productFreightTemplate.freight)+"元)\n              ")]):e._e(),e._v(" "),e.disabledEdit?e._e():i("a",{attrs:{href:"/#/freight/temp",target:"_blank"}},[i("el-button",{staticClass:"sub-button-small",attrs:{type:"primary",size:"small"}},[e._v("更改运费模板")])],1)]):i("span",[e._v("请选择发货地")])]:"date-picker"==t.type?i("el-date-picker",{staticClass:"input-item",attrs:{disabled:e.disabledEdit,editable:!1,type:"date",size:"small",placeholder:t.placeholder},on:{change:function(i){e.checkDate(t.key,"detail")}},model:{value:e.productEdit.sellerProduct[t.key],callback:function(i){e.$set(e.productEdit.sellerProduct,t.key,i)},expression:"productEdit.sellerProduct[subSubItem.key]"}}):"button"==t.type?["edit-whole"==t.editType?[e.wholesalePriceConfig.disabledApple?["checkWholesaleAudit"==t.name?i("el-button",{staticClass:"sub-button-small",attrs:{type:t.style,size:"small"},on:{click:function(t){e.checkWholesaleAudit()}}},[e._v(e._s(t.placeholder))]):"callGetWholesale"==t.name?i("el-button",{staticClass:"sub-button",attrs:{type:t.style,size:"small"},on:{click:function(t){e.callGetWholesale()}}},[e._v(e._s(t.placeholder))]):e._e()]:e._e()]:[e.disabledEdit||"managerDeliverAreaTemplateId"!=t.name?e._e():i("a",{attrs:{href:"/#/distribution/template",target:"_blank"}},[i("el-button",{staticClass:"sub-button",attrs:{type:t.style,size:"small"}},[e._v(e._s(t.placeholder))])],1),e._v(" "),e.disabledEdit||"managerFreightTemplateId"!=t.name?e._e():i("a",{attrs:{href:"/#/delivery/area",target:"_blank"}},[i("el-button",{staticClass:"sub-button-small",attrs:{type:t.style,size:"small"}},[e._v(e._s(t.placeholder))])],1)]]:"sign-tip"==t.type?i("span",{staticStyle:{color:"#9e9e9e"}},["br"==t.layout?i("span",{staticStyle:{display:"block","margin-left":"104px","padding-top":"10px"}},[i("span",[e._v(e._s(t.label))])]):i("span",{staticStyle:{display:"inline-block"}},[i("span",{staticStyle:{"margin-left":"20px"}},[e._v(e._s(t.label))])])]):e._e()]})],2)})],2)}),e._v(" "),i("div",{staticClass:"section-item"},[e._m(1),e._v(" "),i("div",{staticClass:"block-item"},[e.disabledEdit?e._e():i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("商品主图：2至5张主图,分辨率640x640,文件小于400KB！")]),e._v(" "),e._l(e.productImgList,function(t,l){return i("div",{staticClass:"avatar-wrap"},[i("img",{staticClass:"avatar",attrs:{src:t}}),e._v(" "),e.disabledEdit?e._e():i("div",{staticClass:"avatar-menu"},[i("i",{staticClass:"el-icon-search",on:{click:function(i){e.showProductImage(t)}}}),e._v(" "),i("i",{staticClass:"el-icon-delete",on:{click:function(t){e.delProductImage(l)}}})])])}),e._v(" "),e.disabledEdit?e._e():[e.productImgList.length<5?i("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.disabledEdit,action:"/sellerAdmin/pic/upload",data:e.picUpload,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e._e()]],2),e._v(" "),e._m(2),e._v(" "),i("div",{staticClass:"block-item detail-edit-img-wrap"},[e.disabledEdit?e._e():[i("el-upload",{ref:"detailUpload",staticClass:"detail-upload",attrs:{action:"/sellerAdmin/pic/upload",data:e.picUploadWidth,multiple:!0,"on-success":e.handleDetailSuccess,"on-remove":e.handleDetailRemove,"before-upload":e.beforeDetailUpload}},[i("el-button",{attrs:{size:"small",type:"primary",disabled:e.disabledEdit}},[e._v("点击上传")])],1),e._v(" "),e.productEdit.detailList.length>0?i("el-button",{staticClass:"clear-detail",attrs:{size:"small",disabled:e.disabledEdit},on:{click:function(t){e.delDetailImg()}}},[e._v("清除")]):e._e(),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg／png文件，大小不超过400kb")])],e._v(" "),i("div",{staticClass:"detail-wall"},[e._l(e.productEdit.detailList,function(t){return[t?i("img",{attrs:{src:t.content,alt:""}}):e._e()]})],2)],2)]),e._v(" "),i("div",{staticClass:"menu"},[e._l(e.menuList,function(t){return["1"==t?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveProduct(0)}}},[e._v("保存")]):e._e(),e._v(" "),"2"==t?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveProduct(1)}}},[e._v("保存并提交审核")]):e._e(),e._v(" "),"3"==t?i("el-button",{on:{click:function(t){e.callsWithdrawAudit()}}},[e._v("撤回审核")]):e._e(),e._v(" "),"4"!=t||e.productDetail.productSourceSellerId?e._e():i("el-button",{on:{click:function(t){e.callDeleteProduct()}}},[e._v("删除")])]})],2)],2),e._v(" "),i("el-dialog",{staticClass:"modal-dialog",attrs:{title:"供货价调整",size:"tiny",visible:e.modal.isShow},on:{"update:visible":function(t){e.$set(e.modal,"isShow",t)}}},[i("el-form",{ref:"modal.opts",attrs:{model:e.modal.opts,rules:e.rules}},[e.latestWholesale?i("el-form-item",{attrs:{label:"当前供货价","label-width":"100px"}},[i("span",[e._v(e._s(e.latestWholesale.newPrice))])]):e._e(),e._v(" "),e.latestWholesale?i("el-form-item",{attrs:{label:"启用时间","label-width":"100px"}},[i("span",[e._v(e._s(e.latestWholesale.enableTime))])]):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"调整供货价",prop:"price","label-width":"100px"}},[i("el-input",{staticClass:"input-item",attrs:{placeholder:"请填写供货价",size:"small"},model:{value:e.modal.opts.price,callback:function(t){e.$set(e.modal.opts,"price",t)},expression:"modal.opts.price"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"待启用时间",prop:"enableDay","label-width":"100px"}},[i("el-date-picker",{staticClass:"input-item",attrs:{format:"",type:"date","picker-options":e.pickerOptions,editable:!1,size:"small",placeholder:"请填写启用时间"},on:{change:function(t){e.checkDate("enableDay","enableDay")}},model:{value:e.modal.opts.enableDay,callback:function(t){e.$set(e.modal.opts,"enableDay",t)},expression:"modal.opts.enableDay"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"调价原因",prop:"reason","label-width":"100px"}},[i("el-input",{staticClass:"input-item",attrs:{placeholder:"请填写调价原因",size:"small"},model:{value:e.modal.opts.reason,callback:function(t){e.$set(e.modal.opts,"reason",t)},expression:"modal.opts.reason"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.cancelModal()}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitModal("modal.opts")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{staticClass:"table-dialog",attrs:{title:"调价记录",size:"large",visible:e.tableWholesale.isShow},on:{"update:visible":function(t){e.$set(e.tableWholesale,"isShow",t)}}},[i("div",{staticClass:"whole-table-dialog"},[i("el-table",{attrs:{data:e.tableWholesale.list,height:"250"}},[i("el-table-column",{attrs:{prop:"createTime",label:"提交审核时间",width:"160",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"status",label:"审核状态",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.tableWholesaleMap.status[t.row.status]))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"oldPrice",label:"原供货价",width:"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"type",label:"调价类型",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.tableWholesaleMap.type[t.row.type]))])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"newPrice",label:"调整供货价",width:"80",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"enableTime",label:"待启用时间",width:"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"checkTime",label:"审核时间",width:"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.cancelModal()}}},[e._v("取 消")])],1)]),e._v(" "),i("el-dialog",{attrs:{visible:e.productImageDialog.isShow,size:"small"},on:{"update:visible":function(t){e.$set(e.productImageDialog,"isShow",t)}}},[i("img",{attrs:{width:"100%",src:e.productImageDialog.url,alt:""}})])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block-item mg-l mg-t primary-color"},[t("span",[this._v("星号为必填写项，其他项根据产品特性选择性特写")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"section-title"},[t("span",[this._v("图片信息")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"block-item"},[t("span",[this._v("详情图")])])}]}},"m+pJ":function(e,t){}});
//# sourceMappingURL=34.4236043620d3a4be187f.js.map