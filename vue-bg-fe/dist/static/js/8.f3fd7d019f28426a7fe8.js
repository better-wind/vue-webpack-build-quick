webpackJsonp([8],{GniH:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"title"},[a("span",[e._v("商品列表")]),e._v(" "),a("div",{staticClass:"fl-r pd-r"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.createProduct()}}},[e._v("新建商品")])],1)]),e._v(" "),a("div",{staticClass:"section search-goods-box"},[a("div",{staticClass:"section-item"},[a("div",{staticClass:"search-item"},[a("v-search",[a("template",{slot:"private-item"},[a("v-cate")],1),e._v(" "),a("template",{slot:"private-sellerMainId"},[a("div",[a("span",{staticClass:"sign-name-item"},[e._v("货品归属商家：")]),e._v(" "),a("el-select",{staticClass:"input-item-middle",attrs:{filterable:"",size:"small",placeholder:"货品归属商家"},on:{change:e.selectSellerMainId},model:{value:e.currentSearchQuery.sellerMainId,callback:function(t){e.$set(e.currentSearchQuery,"sellerMainId",t)},expression:"currentSearchQuery.sellerMainId"}},[e._l(e.sellerMainIdList,function(e){return[a("el-option",{attrs:{label:e.label,value:e.value}})]})],2)],1)]),e._v(" "),a("template",{slot:"deliver-item"},[a("div",[a("span",{staticClass:"sign-name-item"},[e._v("发货地：")]),e._v(" "),a("el-select",{staticClass:"input-item-middle",attrs:{filterable:"",disabled:!e.sellerDeliverList.length,size:"small",placeholder:e.sellerDeliverList.length?"请选择发货地":"请先选择货品归属商家"},model:{value:e.currentSearchQuery.deliverAreaId,callback:function(t){e.$set(e.currentSearchQuery,"deliverAreaId",t)},expression:"currentSearchQuery.deliverAreaId"}},[e._l(e.sellerDeliverList,function(e){return[a("el-option",{attrs:{label:e.label,value:e.value}})]})],2)],1)]),e._v(" "),a("template",{slot:"brand-item"},[a("div",{staticStyle:{position:"relative",display:"inline"}},[a("span",{staticClass:"sign-name-item"},[e._v("品牌：")]),e._v(" "),a("el-input",{staticClass:"input-item-middle",attrs:{size:"small",placeholder:"请选择品牌"},on:{focus:function(t){e.callPropertyValCheck(!0)},blur:function(t){e.callPropertyValCheck(!1)},change:e.changeBrand},model:{value:e.currentSearchQuery.brandId,callback:function(t){e.$set(e.currentSearchQuery,"brandId","string"==typeof t?t.trim():t)},expression:"currentSearchQuery.brandId"}}),e._v(" "),e.propertyList.length&&e.remoteMethodFocus?a("div",{staticClass:"match-box"},e._l(e.propertyList,function(t){return a("p",[a("span",[e._v(e._s(t.name))])])})):e._e()],1)])],2)],1)]),e._v(" "),a("v-menu"),e._v(" "),a("v-result")],1)])},staticRenderFns:[]}},MlDd:function(e,t,a){"use strict";var r=a("Dd8w"),i=a.n(r),s=a("j+MX"),l=a("NYxO"),n={computed:i()({},Object(l.mapState)(["currentSearch","currentSearchQuery"])),components:{vMenu:s.a},methods:i()({},Object(l.mapActions)(["setCurrentSearchQuery","setClearSelect","exportProductList","exportBaseProduct"]),{reset:function(){var e=Util.resetQuery(this.currentSearch.searchList.public,this.currentSearch.searchList.private);this.setCurrentSearchQuery(e),this.setClearSelect({isClear:!0})},toExport:function(){var e={};for(var t in this.currentSearchQuery)this.currentSearchQuery[t]&&"all"!=this.currentSearchQuery[t]&&(e[t]=this.currentSearchQuery[t]);this.exportProductList(e)},toExportList:function(){var e={};for(var t in this.currentSearchQuery)this.currentSearchQuery[t]&&"all"!=this.currentSearchQuery[t]&&(e[t]=this.currentSearchQuery[t]);this.exportBaseProduct(e)}})},o=a("eNRE"),c=a.n(o),u=a("VU/8")(n,c.a,!1,null,null,null);t.a=u.exports},NSuQ:function(e,t){},YmJt:function(e,t){},cZCL:function(e,t,a){"use strict";var r=a("woOf"),i=a.n(r),s=a("//Fk"),l=a.n(s),n=a("Dd8w"),o=a.n(n),c=a("NYxO"),u={computed:o()({},Object(c.mapState)(["currentSearch","currentSearchQuery"])),props:["categoryConfig"],created:function(){this.initView()},data:function(){return{levelList:[{mapId:"0",key:"firstCategoryId",options:[]},{mapId:"1",key:"secondCategoryId",options:[]},{mapId:"2",key:"thirdCategoryId",options:[]},{mapId:"3",key:"fourthCategoryId",options:[]}],visSelect:!1,cateType:""}},methods:o()({},Object(c.mapActions)(["getCateList","setCurrentSearchQuery","setStartToast"]),{initView:function(){var e=this;this.categoryConfig&&(this.cateType="activity");var t=this.$route.query;this.callCateList(0).then(function(t){t.map(function(e){e.id+=""}),e.levelList[0].options=t}),this.levelList.map(function(a,r){var i=0;t[a.key]&&(i=t[e.levelList[r].key],e.callCateList(i).then(function(t){t.map(function(e){e.id+=""}),3!=r&&(e.levelList[r+1].options=t)}))})},callCateList:function(e){var t=this,a=e||0;return new l.a(function(e){t.getCateList({categoryId:a}).then(function(t){e(t)})})},visibleSelectLevel:function(e){this.visSelect=!0},selectLevel:function(e,t){var a=this;if(!this.visSelect||!this.currentSearchQuery[this.levelList[e].key])return!1;this.callCateList(this.currentSearchQuery[this.levelList[e].key]).then(function(t){for(var r=e,i=[];r<3;)r++,a.levelList[r].options=[],i.push(a.levelList[r].key);a.setParams(i),e<3&&(a.levelList[e+1].options=t)})},setParams:function(e){var t=i()({},this.currentSearchQuery);e.map(function(e){t[e]=""}),this.setCurrentSearchQuery(t)}})},d=a("jJvu"),p=a.n(d);var h=function(e){a("kAlj")},v=a("VU/8")(u,p.a,!1,h,"data-v-22430260",null);t.a=v.exports},eNRE:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-item section-item-no-padding"},[a("div",{staticClass:"menu-item"},[a("v-menu"),e._v(" "),e._l(e.currentSearch.searchMenu.private,function(t,r){return a("div",{staticClass:"inline-item"},["export"==t.type?a("el-button",{attrs:{type:t.style},on:{click:function(t){e.toExport()}}},[e._v(e._s(t.label))]):"new-export"==t.type?a("el-button",{attrs:{type:t.style},on:{click:function(t){e.toExportList()}}},[e._v(e._s(t.label))]):"reset"==t.type?a("el-button",{attrs:{type:t.style},on:{click:function(t){e.reset()}}},[e._v(e._s(t.label))]):e._e()],1)})],2)])},staticRenderFns:[]}},jJvu:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inline-item cate-box",staticStyle:{"margin-bottom":"0","padding-top":"0","padding-bottom":"0"}},["activity"==e.cateType?[a("div",{staticClass:"inline-box",staticStyle:{"margin-bottom":"0","margin-right":"20px"}},[a("span",{staticClass:"sign-name-item"},[e._v(e._s(e.categoryConfig.label)+"：")]),e._v(" "),e._l(e.categoryConfig.items,function(t,r){return["select"==t.type?a("el-select",{staticClass:"input-item-middle",staticStyle:{"margin-right":"20px"},attrs:{size:"small",placeholder:t.placeholder},on:{"visible-change":e.visibleSelectLevel,change:function(t){e.selectLevel(r,"update")}},model:{value:e.currentSearchQuery[t.key],callback:function(a){e.$set(e.currentSearchQuery,t.key,a)},expression:"currentSearchQuery[cate.key]"}},[e._l(e.levelList[r].options,function(e){return[a("el-option",{attrs:{label:e.name,value:e.id}})]})],2):e._e()]})],2)]:e._l(e.currentSearch.searchList.public,function(t){return["cate"==t.type?a("div",{staticClass:"inline-box",staticStyle:{"margin-bottom":"0"}},[a("span",{staticClass:"sign-name-item"},[e._v(e._s(t.label)+"：")]),e._v(" "),e._l(t.items,function(t,r){return["select"==t.type?a("el-select",{staticClass:"input-item-middle",staticStyle:{"margin-right":"20px"},attrs:{size:"small",placeholder:t.placeholder},on:{"visible-change":e.visibleSelectLevel,change:function(t){e.selectLevel(r,"update")}},model:{value:e.currentSearchQuery[t.key],callback:function(a){e.$set(e.currentSearchQuery,t.key,a)},expression:"currentSearchQuery[cate.key]"}},[e._l(e.levelList[r].options,function(e){return[a("el-option",{attrs:{label:e.name,value:e.id}})]})],2):e._e()]})],2):e._e()]})],2)},staticRenderFns:[]}},kAlj:function(e,t){},wm7V:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),i=a.n(r),s=a("75Vn"),l=a("MlDd"),n=a("cZCL"),o=a("mvHQ"),c=a.n(o),u=a("tKaV"),d=a("NYxO"),p={computed:i()({},Object(d.mapState)(["currentSearch","currentSearchQuery"])),created:function(){this.initView()},filters:{skuArrayFilter:function(e){var t=void 0,a=void 0;return e.map(function(e,r){0==r?t=a=e.costPrice:(t=Math.max(t,e.costPrice),a=Math.min(a,e.costPrice))}),t==a?t/100:a/100+" ~ "+t/100}},data:function(){return{loading:!1,paging:{currentPage:1,pageSizes:[20,30,50,100],pageSize:0,total:0},pagingShow:!1,searchResult:{},mapChannels:{1:"格格家",2:"环球捕手",3:"燕网",4:"第三方",5:"B2B",6:"脉宝云店",7:"燕窝酵素"},strongHtml:"",bgColor:"",storageModel:{isShow:!1,storageList:[],isInStorageMenu:!1,isInStorageId:"",isSelfSupportMenu:!1}}},methods:i()({},Object(d.mapActions)(["callSetNotice","getBaseGoodsList","setCurrentSearchQuery","getProductStorageList","saveProductStorage"]),{initView:function(){var e=this.$route.query;this.currentSearchOption=Util.searchQuery(e,this.currentSearch.searchList.public,this.currentSearch.searchList.private),this.setCurrentSearchQuery(this.currentSearchOption),this.searchList(this.currentSearchQuery)},searchList:function(e){var t=this;this.loading=!0,this.getBaseGoodsList(e).then(function(e){t.searchResult=e,t.setPage()})},setPage:function(){this.paging.pageSize=Number(this.currentSearchQuery.rows),this.paging.currentPage=Number(this.currentSearchQuery.page),this.paging.total=this.searchResult.total,this.pagingShow=!0,this.loading=!1},getToast:function(e){this.callSetNotice({isShow:!0,msg:e,type:"warning"})},editProduct:function(e){this.$router.push({name:"productDetail",query:{goodsId:e}})},storageList:function(e){var t=this,a={baseGoodsCode:e};this.getProductStorageList(a).then(function(e){t.setStorageShow(e)})},setStorageShow:function(e){var t=this,a=JSON.parse(c()(e));a.map(function(e){e.skuStorageVOList.map(function(t){t.qtyStorageStockChange=0,1==t.isInStorage&&(e.isInStorage=!0),1==t.deliverAreaStatus&&(e.disableArea=!0)}),e.isSelfSupport||(t.storageModel.isSelfSupportMenu=!0),!e.isInStorage&&e.disableArea&&(t.storageModel.isInStorageMenu=!0)}),this.storageModel.storageList=a,this.storageModel.isShow=!0},submitStorageModel:function(){for(var e=this,t=[],a=0,r=this.storageModel.storageList.length;a<r;a++){var i=this.storageModel.storageList[a],s={};s.deliverAreaId=i.deliverAreaId,s.adjustSku=[];for(var l=0,n=i.skuStorageVOList.length;l<n;l++){var o=i.skuStorageVOList[l];if(o.qtyStorageStock+o.qtyStorageStockChange<o.lockStock)return this.getToast("剩余库存应大于等于锁定库存"),o.qtyStorageStockChange=-o.availCount,!1;var c={skuId:o.skuId,qtyStorageStockChange:o.qtyStorageStockChange};s.adjustSku.push(c)}t.push(s)}var u={stockFormList:t};this.saveProductStorage(u).then(function(t){e.cancelStorageModel(),e.initView()})},cancelStorageModel:function(){this.storageModel.isShow=!1,this.storageModel.storageList=[],this.storageModel.isSelfSupportMenu=!1,this.storageModel.isInStorageMenu=!1}}),watch:{$route:function(e,t){e.fullPath!==t.fullPath&&this.initView()}},components:{vPagination:u.a}},h=a("y4oO"),v=a.n(h);var g=function(e){a("YmJt")},y=a("VU/8")(p,v.a,!1,g,"data-v-f0fcde6a",null).exports,S={created:function(){this.initView()},data:function(){return{sellerMainIdList:[],sellerDeliverList:[],searchPage:{searchList:{public:[{type:"",key:"page",intKey:1},{type:"",key:"rows",intKey:20},{private:!0,type:"cate",label:"类目",isSlot:!0,slotName:"private-item",items:[{type:"select",label:"",key:"firstCategoryId",intKey:"",placeholder:"一级分类",options:[]},{type:"select",label:"",key:"secondCategoryId",intKey:"",placeholder:"二级分类",options:[]},{type:"select",label:"",key:"thirdCategoryId",intKey:"",placeholder:"三级分类",options:[]},{type:"select",label:"",key:"fourthCategoryId",intKey:"",placeholder:"四级分类",options:[]}]},{type:"select",label:"销售状态",placeholder:"销售状态",key:"saleStatus",intKey:"",selectType:"selectAll",options:[{value:"all",label:"全部"},{label:"出售中",value:"1"},{label:"未出售",value:"0"}]},{type:"select",label:"是否可用",placeholder:"是否可用",key:"status",intKey:"",selectType:"selectAll",options:[{value:"all",label:"全部"},{label:"可用",value:"1"},{label:"停用",value:"0"}]},{type:"input",label:"基础商品码",placeholder:"基础商品码",key:"baseGoodsCode",intKey:""},{type:"input",label:"商品名称",placeholder:"商品名称",key:"name",intKey:""},{type:"select",filterable:!0,label:"发货地",placeholder:"发货地",key:"deliverAreaId",intKey:"",options:[]},{type:"select",filterable:!0,label:"品牌",placeholder:"品牌",key:"brandId",intKey:"",options:[]},{type:"input",label:"SKU码",placeholder:"SKU码",key:"skuCode",intKey:""},{type:"input",label:"发货编码",placeholder:"发货编码",key:"deliverCode",intKey:""}],private:[]},searchMenu:{public:[{label:"查询",type:"submit",style:"primary"},{label:"重置",type:"reset"}],private:[{label:"导出",type:"new-export"}]},resultItem:{option:[{label:"主图",key:"imageUrl",width:"100",type:"image"},{label:"基础商品码",key:"baseGoodsCode",width:"160",type:"base"},{label:"销售状态",key:"saleStatus",width:"80",type:"saleStatus"},{label:"商品名称",key:"name",width:"",type:"name"},{label:"供货价(不含邮)",key:"costPriceRange",width:"120",type:"costPrice"},{label:"可发库存",key:"availCountRange",width:"120",type:""},{label:"操作",key:"operate",width:"100",type:"operate"}]}},propertyList:[],labelIdsListFocus:!1,remoteMethodFocus:!1}},computed:i()({},Object(d.mapState)(["currentSearchQuery"])),methods:i()({},Object(d.mapActions)(["setSearch","getManagerGroupList","getGoodsBelong","getGoodsSellerDeliver","getBrandSearchList","getBrandSearchList","getGoodsDeliver"]),{initView:function(){var e=this;this.getGoodsDeliver().then(function(t){var a=[];t.map(function(e){var t={label:e.name,value:e.code+""};a.push(t)}),e.searchPage.searchList.public[e.mapSearchIdx("deliverAreaId")].options=a}),this.getBrandSearchList().then(function(t){var a=[];t.map(function(e){var t={label:e.name,value:e.id+""};a.push(t)}),e.searchPage.searchList.public[e.mapSearchIdx("brandId")].options=a}),this.setSearch(this.searchPage)},mapSearchIdx:function(e){return this.searchPage.searchList.public.findIndex(function(t){return t.key==e})},selectSellerMainId:function(e){var t=this;if(null==e||""==e)return!1;this.getGoodsSellerDeliver({sellerMainId:e}).then(function(e){t.sellerDeliverList=[],t.currentSearchQuery.deliverAreaId="",e.map(function(e){var a={label:e.deliverAreaName,value:e.deliverAreaId};t.sellerDeliverList.push(a)})})},callPropertyValCheck:function(e){this.remoteMethodFocus=e},debounce:function(e,t,a){var r;return function(){var i=this,s=arguments,l=a&&!r;clearTimeout(r),r=setTimeout(function(){r=null,a||e.apply(i,s)},t),l&&e.apply(i,s)}},changeBrand:function(e){if(!e)return this.propertyList=[],!1;this.debounce(this.remoteMethodBrand(e),300)},remoteMethodBrand:function(e){var t=this;if(!e)return this.propertyList=[],!1;var a={brandName:e};this.getBrandSearchList(a).then(function(e){t.propertyList=e})},createProduct:function(){this.$router.push({path:"/product/detail"})}}),components:{vSearch:s.a,vMenu:l.a,vCate:n.a,vResult:y}},m=a("GniH"),f=a.n(m);var b=function(e){a("NSuQ")},_=a("VU/8")(S,f.a,!1,b,null,null);t.default=_.exports},y4oO:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-box"},[a("div",{staticClass:"item-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",border:"",data:e.searchResult.rows}},[e._l(e.currentSearch.resultItem.option,function(t,r){return["image"==t.type?a("el-table-column",{attrs:{label:t.label,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"table-image",staticStyle:{height:"80px",padding:"2px 0"}},[t.row.imageUrl?a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.imageUrl,alt:""}}):e._e()])]}}])}):"saleStatus"==t.type?a("el-table-column",{attrs:{label:t.label,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.saleStatus?a("p",[e._v("出售中")]):a("p",{staticClass:"c-red"},[e._v("未出售")])]}}])}):"base"==t.type?a("el-table-column",{attrs:{label:t.label,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(r){return[a("p",[0==r.row.status?a("span",{staticClass:"c-red"},[e._v("(停用)")]):e._e(),e._v("\n              "+e._s(r.row[t.key])+"\n            ")])]}}])}):"name"==t.type?a("el-table-column",{attrs:{label:t.label,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[1==t.row.auditStatus?a("span",{staticClass:"c-red"},[e._v("(审核中)")]):e._e(),e._v("\n              "+e._s(t.row.name)+"\n            ")])]}}])}):"operate"==t.type?a("el-table-column",{attrs:{label:t.label,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.editProduct(t.row.baseGoodsCode)}}},[e._v("编辑商品")]),e._v(" "),a("p",[a("el-button",{staticStyle:{"margin-top":"10px"},attrs:{size:"small"},on:{click:function(a){e.storageList(t.row.baseGoodsCode)}}},[e._v("调整库存")])],1)]}}])}):a("el-table-column",{attrs:{prop:t.key,label:t.label,width:t.width,align:"center"}})]})],2)],1),e._v(" "),e.pagingShow?a("v-pagination",{attrs:{paging:e.paging}}):e._e(),e._v(" "),a("el-dialog",{attrs:{title:"销量和库存",size:"large",visible:e.storageModel.isShow,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.$set(e.storageModel,"isShow",t)}}},[e._l(e.storageModel.storageList,function(t){return[a("div",[a("span",{staticClass:"mg-r"},[e._v("商品名称："+e._s(t.name))]),e._v(" "),a("span",[e._v("发货地："+e._s(t.deliverAreaName)+" ")])]),e._v(" "),a("div",{staticClass:"item-table mg-t-h mg-b"},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:t.skuStorageVOList}},[a("el-table-column",{attrs:{label:"SKU码",prop:"skuCode",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"销售属性值",prop:"saleProperties",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",{staticClass:"c-red"},[e._v("(停售)")]):e._e(),a("span",[e._v(e._s(t.row.saleProperties))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"发货编码",prop:"deliverCode",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.deliverAreaStatus?a("span",{staticClass:"c-red"},[e._v("(停用)")]):e._e(),a("span",[e._v(e._s(t.row.deliverCode))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"成本价(不含邮)",prop:"costPriceBig",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"总库存",prop:"qtyStorageStock",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"锁定库存",prop:"lockStock",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"剩余库存",prop:"availCount",align:"center"}}),e._v(" "),t.isInStorage||!t.disableArea||t.isSelfSupport?e._e():a("el-table-column",{attrs:{label:"调整剩余库存",prop:"skuCode",align:"center",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.deliverAreaStatus?[a("el-input-number",{staticClass:"mg-t-h el-input-number-border",attrs:{min:0-t.row.availCount,debounce:300,size:"small"},model:{value:t.row.qtyStorageStockChange,callback:function(a){e.$set(t.row,"qtyStorageStockChange",a)},expression:"scope.row.qtyStorageStockChange"}})]:e._e()]}}])})],1)],1)]}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.storageModel.isInStorageMenu&&e.storageModel.isSelfSupportMenu?a("el-button",{attrs:{type:"primary"},on:{click:e.submitStorageModel}},[e._v("保 存")]):e._e(),e._v(" "),a("el-button",{on:{click:e.cancelStorageModel}},[e._v("取 消")])],1)],2)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=8.f3fd7d019f28426a7fe8.js.map