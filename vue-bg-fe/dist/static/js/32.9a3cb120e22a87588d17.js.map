{"version":3,"sources":["webpack:///./src/pages/freightManage/productWeight.vue?055e","webpack:///src/pages/freightManage/productWeight.vue","webpack:///./src/pages/freightManage/productWeight.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","_m","_v","staticClass","_s","productUnSetWeightAmount","on","scroll","$event","onScroll","ref","staticStyle","width","attrs","data","productList","selection-change","handleSelectionChange","type","align","selectable","_l","item","prop","key","label","scopedSlots","_u","fn","scope","src","row","alt","grossWeightAuditStatus","disabled","size","model","value","callback","$$v","$set","expression","mapSaleStatus","text-align","click","callSaveWeight","staticRenderFns","text-indent","initView","methods","extends_default","Object","vuex_esm","_this2","getUnSetWeightAmount","then","rs","scrollPage","able","list","_this3","i","id","auditGrossWeight","opt","grossWeightList","initScroll","clearSelection","_this4","page","rows","pop","_this","tt","offsetHeight","scrollHeight","scrollTop","callScrollPage","msg","notice","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","productWeight","productWeight_default","a","__webpack_exports__"],"mappings":"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","file":"static/js/32.9a3cb120e22a87588d17.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"section\"},[_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"pd-l\"},[_c('p',[_vm._v(\"当前未设置毛重信息的商品数量：\"+_vm._s(_vm.productUnSetWeightAmount))])]),_vm._v(\" \"),_c('div',{staticClass:\"title-top\"},[_c('div',{staticClass:\"result-view\",on:{\"scroll\":function($event){_vm.onScroll($event)}}},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.productList},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"align\":\"center\",\"width\":\"55\",\"selectable\":_vm.selectable}}),_vm._v(\" \"),_vm._l((_vm.configProduct),function(item){return [(item.type=='image')?_c('el-table-column',{attrs:{\"prop\":item.key,\"label\":item.label,\"width\":item.width,\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticClass:\"el-table-image\"},[_c('img',{attrs:{\"src\":scope.row[item.key],\"alt\":\"\"}})])]}}])}):(item.type=='input')?_c('el-table-column',{attrs:{\"prop\":item.key,\"label\":item.label,\"width\":item.width,\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',[(scope.row.grossWeightAuditStatus == 1)?_c('el-input',{staticClass:\"input-item\",attrs:{\"disabled\":true,\"size\":\"small\"},model:{value:(scope.row[item.key]),callback:function ($$v) {_vm.$set(scope.row, item.key, $$v)},expression:\"scope.row[item.key]\"}}):_c('el-input',{staticClass:\"input-item\",attrs:{\"size\":\"small\"},model:{value:(scope.row[item.key]),callback:function ($$v) {_vm.$set(scope.row, item.key, $$v)},expression:\"scope.row[item.key]\"}})],1)]}}])}):(item.type=='saleStatus')?_c('el-table-column',{attrs:{\"prop\":item.key,\"label\":item.label,\"width\":item.width,\"align\":\"center\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n                \"+_vm._s(_vm.mapSaleStatus[scope.row[item.key]])+\"\\n              \")]}}])}):_c('el-table-column',{attrs:{\"prop\":item.key,\"label\":item.label,\"width\":item.width,\"align\":\"center\"}})]})],2)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"section-item pd-r\",staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.callSaveWeight}},[_vm._v(\"选中商品并提交审核\")])],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"批量设置商品毛重\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"section-item\"},[_c('p',[_vm._v(\"批量设置商品毛重的流程：\")]),_vm._v(\" \"),_c('p',{staticStyle:{\"text-indent\":\"1rem\"}},[_vm._v(\"1.完善表格内商品毛重信息；\")]),_vm._v(\" \"),_c('p',{staticStyle:{\"text-indent\":\"1rem\"}},[_vm._v(\"2.选中并提交审核；\")]),_vm._v(\" \"),_c('p',{staticStyle:{\"text-indent\":\"1rem\"}},[_vm._v(\"3.待审核通过后再行设置运费模版；\")])])}]\nmodule.exports = { render: render, staticRenderFns: staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c62c58ba\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/freightManage/productWeight.vue\n// module id = 46DA\n// module chunks = 32","<template>\n  <div>\n    <div class=\"title\">\n      <span>批量设置商品毛重</span>\n    </div>\n    <div class=\"section\">\n      <div class=\"section-item\">\n        <p>批量设置商品毛重的流程：</p>\n        <p style=\"text-indent: 1rem\">1.完善表格内商品毛重信息；</p>\n        <p style=\"text-indent: 1rem\">2.选中并提交审核；</p>\n        <p style=\"text-indent: 1rem\">3.待审核通过后再行设置运费模版；</p>\n      </div>\n      <div class=\"pd-l\">\n        <p>当前未设置毛重信息的商品数量：{{productUnSetWeightAmount}}</p>\n      </div>\n      <div class=\"title-top\">\n        <div class=\"result-view\" @scroll=\"onScroll($event)\">\n          <el-table :data=\"productList\" ref=\"multipleTable\" style=\"width: 100%\" @selection-change=\"handleSelectionChange\">\n            <el-table-column type=\"selection\" align=\"center\" width=\"55\" :selectable=\"selectable\"></el-table-column>\n            <template v-for=\"item in configProduct\">\n              <el-table-column v-if=\"item.type=='image'\" :prop=\"item.key\" :label=\"item.label\" :width=\"item.width\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <div class=\"el-table-image\">\n                    <img :src=\"scope.row[item.key]\" alt=\"\">\n                  </div>\n                </template>\n              </el-table-column>\n              <el-table-column v-else-if=\"item.type=='input'\" :prop=\"item.key\" :label=\"item.label\" :width=\"item.width\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  <div>\n                    <el-input v-if=\"scope.row.grossWeightAuditStatus == 1\" :disabled=\"true\" class=\"input-item\" v-model=\"scope.row[item.key]\" size=\"small\"></el-input>\n                    <el-input v-else class=\"input-item\" v-model=\"scope.row[item.key]\" size=\"small\"></el-input>\n                  </div>\n                </template>\n              </el-table-column>\n              <el-table-column v-else-if=\"item.type=='saleStatus'\" :prop=\"item.key\" :label=\"item.label\" :width=\"item.width\" align=\"center\">\n                <template slot-scope=\"scope\">\n                  {{mapSaleStatus[scope.row[item.key]]}}\n                </template>\n              </el-table-column>\n              <el-table-column v-else :prop=\"item.key\" :label=\"item.label\" :width=\"item.width\" align=\"center\"></el-table-column>\n            </template>\n          </el-table>\n        </div>\n      </div>\n\n      <div class=\"section-item pd-r\" style=\"text-align: right\">\n        <el-button size=\"small\" @click=\"callSaveWeight\" type=\"primary\">选中商品并提交审核</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import {mapState, mapActions} from 'vuex'\n  export default {\n    created (){\n      this.initView()\n    },\n    data: ()=>({\n      configProduct:[\n        {\n          label:'商品ID',\n          key:'id',\n          width:'',\n        },\n        {\n          label:'商品主图',\n          key:'image1',\n          width:'',\n          type:'image',\n\n        },\n        {\n          label:'商品编码',\n          key:'code',\n          width:'',\n        },\n        {\n          label:'商品名称',\n          key:'name',\n          width:'',\n        },\n        {\n          label:'在售状态',\n          key:'saleStatus',\n          width:'',\n          type:'saleStatus'\n        },\n        {\n          label:'规格',\n          key:'netVolume',\n          width:'',\n        },\n        {\n          label:'原毛重（克）',\n          key:'grossWeight',\n          width:'',\n        },\n        {\n          label:'更新毛重（克）',\n          key:'auditGrossWeight',\n          width:'',\n          type:'input'\n        },\n      ],\n      productList:[],\n      isLoading:false,\n      isEnd:false,\n      page:1,\n      rows:20,\n      isFirstLoad:true,\n      mapSaleStatus:{\n        0:\"未出售\",\n        1:\"出售中\"\n      },\n      batchList:[],\n      NoWeightAmount:0,\n      productUnSetWeightAmount:0\n    }),\n    methods:{\n      ...mapActions(['getProductWeightList','saveProductWeight','callSetNotice','getUnSetWeightAmount']),\n      initView(){\n        this.getUnSetWeightAmount()\n          .then((rs)=>{\n           this.productUnSetWeightAmount = rs\n          })\n        this.scrollPage()\n      },\n      selectable(row,id){\n        let able = true\n        if(row.grossWeightAuditStatus == 1)  {\n          able = false\n        }\n        return able\n      },\n      handleSelectionChange(list){\n        this.batchList = list;\n      },\n      callSaveWeight(){\n        if(!this.batchList.length){\n          this.getNotice('请选择要修改的商品')\n          return false\n        }\n        const res = /^[1-9]{1}[0-9]*$/g;\n        let grossWeightList = []\n        for(let i in this.batchList){\n          const item = this.batchList[i]\n          if(!item.auditGrossWeight){\n            this.getNotice('请填写第'+(Number(i)+1)+'个商品的修改毛重')\n            return false\n          }\n          if(!item.auditGrossWeight.match(res)){\n            this.getNotice('第'+(Number(i)+1)+'个商品的毛重格式不正确')\n            return false\n          }\n          let opt = {\n            sellerProductId:item.id,\n            grossWeight:item.auditGrossWeight\n          }\n          grossWeightList.push(opt)\n        }\n\n//        console.log(grossWeightList)\n        this.saveProductWeight({grossWeightList:grossWeightList})\n          .then(()=>{\n              this.getNotice('提交成功')\n              this.initScroll()\n              this.scrollPage()\n          })\n      },\n      initScroll(){\n        this.productList = []\n        this.isLoading = false\n        this.isEnd = false\n        this.isFirstLoad = true\n        this.page = 1\n        this.rows = 20\n        this.batchList = []\n        this.$refs.multipleTable.clearSelection()\n      },\n//      addAmount(list){\n//        list.map((item)=>{\n//          if(!item.grossWeight){\n//            this.NoWeightAmount++\n//          }\n//        })\n//\n//      },\n      scrollPage(){\n        const opt = {\n          page:this.page,\n          rows:this.rows\n        }\n        this.getProductWeightList(opt)\n          .then((rs)=>{\n\n            Array.prototype.push.apply(this.productList,rs.rows)\n            this.productList.push({})\n            this.productList.pop()\n            let _this = this;\n            let tt = setTimeout(function(){\n              _this.isLoading = false\n              _this.isFirstLoad = false\n              clearTimeout(tt)\n            },1000)\n\n            if(rs.rows.length < this.rows){\n                this.isEnd = true\n            }\n//            if(this.page > 5){\n//              this.isEnd = true\n//            }\n          })\n      },\n      callScrollPage(){\n        if(this.isEnd || this.isLoading){\n          return false;\n        }\n        this.page++\n        this.isLoading = true\n        this.scrollPage()\n      },\n      onScroll(event){\n        var offsetHeight = event.currentTarget.offsetHeight,\n          scrollHeight = event.target.scrollHeight,\n          scrollTop = event.target.scrollTop,\n          scrollBottom = offsetHeight + scrollTop\n          if(offsetHeight + scrollTop + 50 >= scrollHeight && !this.isFirstLoad){\n            this.callScrollPage()\n          }\n      },\n      getNotice(msg){\n        const notice = {\n          isShow:true,\n          msg:msg,\n        }\n        this.callSetNotice(notice)\n      }\n    },\n  }\n</script>\n<style lang='less' rel=\"stylesheet/less\" scoped>\n\n  .title-top{\n    position: relative;\n    padding-top: 40px;\n    margin-top: 20px;\n  }\n  .result-view{\n    height: 600px;\n    overflow-y: scroll;\n    .input-item{\n      width: 80px;\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/freightManage/productWeight.vue","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c62c58ba\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./productWeight.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./productWeight.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./productWeight.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c62c58ba\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./productWeight.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c62c58ba\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/freightManage/productWeight.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}