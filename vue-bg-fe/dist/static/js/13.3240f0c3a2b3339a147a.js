webpackJsonp([13],{YSnF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),r=i.n(a),s=i("dJOE"),l=i("NOQh"),n=i("NYxO"),o=i("tKaV"),c={created:function(){this.initView()},data:function(){return{tableList:[],paging:{currentPage:1,pageSizes:[20,30,50,100],pageSize:0,total:0,query:{}},pagingShow:!1,loading:!0,ruleView:{isShow:!1,params:{sellerId:"",baseGoodsCode:"",deliverCode:"",maxNumber:""},initParams:{sellerId:"",baseGoodsCode:"",deliverCode:"",maxNumber:""}},mapDeliveryList:{}}},props:["deliveryList"],computed:r()({},Object(n.d)(["currentSearch","currentSearchQuery"])),methods:r()({},Object(n.b)(["setCurrentSearchQuery","getExportRuleList","addExportRule","delExportRule","callSetNotice"]),{initView:function(){var e=this,t=this.$route.query;this.currentSearchOption=Util.searchQuery(t,this.currentSearch.searchList.public,this.currentSearch.searchList.private),this.setCurrentSearchQuery(this.currentSearchOption),this.pagingShow=!1,this.deliveryList.forEach(function(t){e.mapDeliveryList[t.value]=t.label}),this.callGetExportRuleList()},callGetExportRuleList:function(){var e=this;this.loading=!0,this.getExportRuleList(this.currentSearchQuery).then(function(t){e.pagingShow=!0,e.setOrderList(t)})},setOrderList:function(e){this.loading=!1,this.tableList=e.rows,this.paging.pageSize=Number(this.currentSearchQuery.rows),this.paging.currentPage=Number(this.currentSearchQuery.page),this.paging.total=e.total,this.paging.query=this.currentSearchQuery},tableRowClassName:function(e,t){return t%2==1?"info-row":"positive-row"},addRule:function(){this.ruleView.isShow=!0},cancelEdit:function(){this.ruleView.isShow=!1,this.ruleView.params=this.ruleView.initParams},submitEdit:function(){var e=this;return this.ruleView.params.sellerId?this.ruleView.params.baseGoodsCode+""||this.ruleView.params.deliverCode+""?this.ruleView.params.maxNumber+""?(this.ruleView.params.maxNumber+"").match(RegExpType.Num)?this.ruleView.params.maxNumber+""==0?(this.getNotice("每包裹最大件数不能为0"),!1):void this.addExportRule(this.ruleView.params).then(function(t){e.cancelEdit(),e.getNotice("增加成功"),e.callGetExportRuleList()}):(this.getNotice("每包裹最大件数格式不正确"),!1):(this.getNotice("请填写每包裹最大件数"),!1):(this.getNotice("基础商品码和发货编码至少填写一个"),!1):(this.getNotice("请选择发货地"),!1)},callDelExportRule:function(e){var t=this;this.$confirm("是否删除此条导出规则？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.delExportRule(e).then(function(){t.getNotice("删除成功"),t.callGetExportRuleList()})}).catch(function(){})},getNotice:function(e){var t={isShow:!0,msg:e};this.callSetNotice(t)}}),components:{vPagination:o.a},watch:{$route:function(e,t){e.fullPath!==t.fullPath&&this.initView()}}},u={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"section-item section-item-no-padding"},[i("div",{staticClass:"section-item"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addRule}},[e._v("新建规则")])],1),e._v(" "),i("div",{staticClass:"result-view"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"element-loading-text":"拼命加载中",data:e.tableList,"row-class-name":e.tableRowClassName}},[e._l(e.currentSearch.resultItem.option,function(t,a){return["opera"==t.type?i("el-table-column",{attrs:{label:t.label,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"small"},on:{click:function(i){e.callDelExportRule(t.row.id)}}},[e._v("删除")])]}}])}):"mapSellerId"==t.type?i("el-table-column",{attrs:{label:t.label,width:t.width,align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.mapDeliveryList[t.row.sellerId])+"\n            ")]}}])}):i("el-table-column",{attrs:{prop:t.key,label:t.label,width:t.width,align:"center"}})]})],2),e._v(" "),e.pagingShow?i("v-pagination",{attrs:{paging:e.paging}}):e._e()],1),e._v(" "),i("el-dialog",{staticClass:"edit-model",attrs:{title:"新建导出规则",size:"small",visible:e.ruleView.isShow},on:{"update:visible":function(t){e.$set(e.ruleView,"isShow",t)},close:function(t){e.cancelEdit()}}},[i("div",[i("div",{staticClass:"block-item"},[i("span",[e._v("发货地：")]),e._v(" "),i("el-select",{staticClass:"edit-input",attrs:{clearable:"",size:"small",placeholder:"请选择内容"},model:{value:e.ruleView.params.sellerId,callback:function(t){e.$set(e.ruleView.params,"sellerId",t)},expression:"ruleView.params.sellerId"}},[e._l(e.deliveryList,function(e){return[i("el-option",{attrs:{label:e.label,value:e.value}})]})],2)],1),e._v(" "),i("div",{staticClass:"block-item"},[i("span",[e._v("基础商品码：")]),e._v(" "),i("el-input",{staticClass:"edit-input",attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.ruleView.params.baseGoodsCode,callback:function(t){e.$set(e.ruleView.params,"baseGoodsCode","string"==typeof t?t.trim():t)},expression:"ruleView.params.baseGoodsCode"}})],1),e._v(" "),i("div",{staticClass:"block-item"},[i("span",[e._v("发货编码：")]),e._v(" "),i("el-input",{staticClass:"edit-input",attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.ruleView.params.deliverCode,callback:function(t){e.$set(e.ruleView.params,"deliverCode","string"==typeof t?t.trim():t)},expression:"ruleView.params.deliverCode"}})],1),e._v(" "),i("div",{staticClass:"block-item"},[i("span",[e._v("每包裹最大件数：")]),e._v(" "),i("el-input",{staticClass:"edit-input",attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.ruleView.params.maxNumber,callback:function(t){e.$set(e.ruleView.params,"maxNumber","string"==typeof t?t.trim():t)},expression:"ruleView.params.maxNumber"}})],1),e._v(" "),i("div",[i("span",{staticClass:"c-red c-tip"},[e._v("注：基础商品码与发货编码至少填写一个")])])]),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.cancelEdit()}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEdit()}}},[e._v("确定")])],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(c,u,!1,function(e){i("on3Z")},"data-v-c3e12912",null).exports,p={name:"orderSearch",created:function(){this.initSearch()},computed:r()({},Object(n.d)(["currentSearch"])),data:function(){return{orderSearch:{searchList:{public:[{type:"",key:"page",intKey:1},{type:"",key:"rows",intKey:20},{type:"select",label:"发货地",placeholder:"请选择",key:"sellerId",options:[]},{type:"input",label:"商品名称",placeholder:"请输入商品名称",key:"skuName",width:"323.5"},{type:"input",label:"基础商品码",placeholder:"请输入内容",key:"baseGoodsCode"},{type:"input",label:"发货编码",placeholder:"请输入内容",key:"deliverCode"}]},searchMenu:{public:[{label:"查询",style:"primary",type:"submit"},{label:"重置",type:"reset"}],private:[]},resultItem:{type:"search",option:[{label:"发货地",key:"sellerId",type:"mapSellerId",width:"150"},{label:"商品名称",key:"skuName"},{label:"基础商品码",key:"baseGoodsCode"},{label:"发货编码",key:"deliverCode"},{label:"每包裹最大件数",key:"maxNumber"},{type:"opera",label:"操作",width:"200"}],opera:{items:[{type:"toDetail",label:"查看详情",key:"orderNumber",val:"orderNumber",source:"search"},{type:"sendOrder",label:"发货",key:"status",val:"orderNumber"}]}}},deliveryList:[],deliveryListReady:!1}},methods:r()({},Object(n.b)(["setSearch","getDeliveryArea"]),{initSearch:function(){var e=this;this.getDeliveryArea().then(function(t){e.setDeliveryListOpt(t)}),this.setSearch(this.orderSearch)},setDeliveryListOpt:function(e){var t=[];e.forEach(function(e,i){var a={label:e.sendAddress,value:e.id+""};t.push(a)}),this.deliveryList=t,this.deliveryListReady=!0,this.orderSearch.searchList.public[2].options=t}}),components:{vSearchItem:s.a,vSearchMenu:l.a,vSearchResult:d}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e._m(0),e._v(" "),i("div",{staticClass:"section"},[i("v-search-item"),e._v(" "),i("div",{staticClass:"market-box"},[i("div",{staticClass:"market-sign primary-color"},[e._v("\n        注：该规则仅在单独导出“待发货”订单时生效\n      ")]),e._v(" "),i("v-search-menu")],1),e._v(" "),e.deliveryListReady?i("v-search-result",{attrs:{deliveryList:e.deliveryList}}):e._e()],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("导出规则")])])}]};var m=i("VU/8")(p,h,!1,function(e){i("m6ib")},"data-v-8c67f8a0",null);t.default=m.exports},m6ib:function(e,t){},on3Z:function(e,t){}});
//# sourceMappingURL=13.3240f0c3a2b3339a147a.js.map