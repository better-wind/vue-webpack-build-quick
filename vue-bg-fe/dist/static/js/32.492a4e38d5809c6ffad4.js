webpackJsonp([32],{"46DA":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t._m(0),t._v(" "),i("div",{staticClass:"section"},[t._m(1),t._v(" "),i("div",{staticClass:"pd-l"},[i("p",[t._v("当前未设置毛重信息的商品数量："+t._s(t.productUnSetWeightAmount))])]),t._v(" "),i("div",{staticClass:"title-top"},[i("div",{staticClass:"result-view",on:{scroll:function(e){t.onScroll(e)}}},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.productList},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"55",selectable:t.selectable}}),t._v(" "),t._l(t.configProduct,function(e){return["image"==e.type?i("el-table-column",{attrs:{prop:e.key,label:e.label,width:e.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("div",{staticClass:"el-table-image"},[i("img",{attrs:{src:t.row[e.key],alt:""}})])]}}])}):"input"==e.type?i("el-table-column",{attrs:{prop:e.key,label:e.label,width:e.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function(s){return[i("div",[1==s.row.grossWeightAuditStatus?i("el-input",{staticClass:"input-item",attrs:{disabled:!0,size:"small"},model:{value:s.row[e.key],callback:function(i){t.$set(s.row,e.key,i)},expression:"scope.row[item.key]"}}):i("el-input",{staticClass:"input-item",attrs:{size:"small"},model:{value:s.row[e.key],callback:function(i){t.$set(s.row,e.key,i)},expression:"scope.row[item.key]"}})],1)]}}])}):"saleStatus"==e.type?i("el-table-column",{attrs:{prop:e.key,label:e.label,width:e.width,align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v("\n                "+t._s(t.mapSaleStatus[i.row[e.key]])+"\n              ")]}}])}):i("el-table-column",{attrs:{prop:e.key,label:e.label,width:e.width,align:"center"}})]})],2)],1)]),t._v(" "),i("div",{staticClass:"section-item pd-r",staticStyle:{"text-align":"right"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.callSaveWeight}},[t._v("选中商品并提交审核")])],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("批量设置商品毛重")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"section-item"},[e("p",[this._v("批量设置商品毛重的流程：")]),this._v(" "),e("p",{staticStyle:{"text-indent":"1rem"}},[this._v("1.完善表格内商品毛重信息；")]),this._v(" "),e("p",{staticStyle:{"text-indent":"1rem"}},[this._v("2.选中并提交审核；")]),this._v(" "),e("p",{staticStyle:{"text-indent":"1rem"}},[this._v("3.待审核通过后再行设置运费模版；")])])}]}},TjaP:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),a=i.n(s),l=i("NYxO"),n={created:function(){this.initView()},data:function(){return{configProduct:[{label:"商品ID",key:"id",width:""},{label:"商品主图",key:"image1",width:"",type:"image"},{label:"商品编码",key:"code",width:""},{label:"商品名称",key:"name",width:""},{label:"在售状态",key:"saleStatus",width:"",type:"saleStatus"},{label:"规格",key:"netVolume",width:""},{label:"原毛重（克）",key:"grossWeight",width:""},{label:"更新毛重（克）",key:"auditGrossWeight",width:"",type:"input"}],productList:[],isLoading:!1,isEnd:!1,page:1,rows:20,isFirstLoad:!0,mapSaleStatus:{0:"未出售",1:"出售中"},batchList:[],NoWeightAmount:0,productUnSetWeightAmount:0}},methods:a()({},Object(l.mapActions)(["getProductWeightList","saveProductWeight","callSetNotice","getUnSetWeightAmount"]),{initView:function(){var t=this;this.getUnSetWeightAmount().then(function(e){t.productUnSetWeightAmount=e}),this.scrollPage()},selectable:function(t,e){var i=!0;return 1==t.grossWeightAuditStatus&&(i=!1),i},handleSelectionChange:function(t){this.batchList=t},callSaveWeight:function(){var t=this;if(!this.batchList.length)return this.getNotice("请选择要修改的商品"),!1;var e=/^[1-9]{1}[0-9]*$/g,i=[];for(var s in this.batchList){var a=this.batchList[s];if(!a.auditGrossWeight)return this.getNotice("请填写第"+(Number(s)+1)+"个商品的修改毛重"),!1;if(!a.auditGrossWeight.match(e))return this.getNotice("第"+(Number(s)+1)+"个商品的毛重格式不正确"),!1;var l={sellerProductId:a.id,grossWeight:a.auditGrossWeight};i.push(l)}this.saveProductWeight({grossWeightList:i}).then(function(){t.getNotice("提交成功"),t.initScroll(),t.scrollPage()})},initScroll:function(){this.productList=[],this.isLoading=!1,this.isEnd=!1,this.isFirstLoad=!0,this.page=1,this.rows=20,this.batchList=[],this.$refs.multipleTable.clearSelection()},scrollPage:function(){var t=this,e={page:this.page,rows:this.rows};this.getProductWeightList(e).then(function(e){Array.prototype.push.apply(t.productList,e.rows),t.productList.push({}),t.productList.pop();var i=t,s=setTimeout(function(){i.isLoading=!1,i.isFirstLoad=!1,clearTimeout(s)},1e3);e.rows.length<t.rows&&(t.isEnd=!0)})},callScrollPage:function(){if(this.isEnd||this.isLoading)return!1;this.page++,this.isLoading=!0,this.scrollPage()},onScroll:function(t){var e=t.currentTarget.offsetHeight,i=t.target.scrollHeight,s=t.target.scrollTop;e+s+50>=i&&!this.isFirstLoad&&this.callScrollPage()},getNotice:function(t){var e={isShow:!0,msg:t};this.callSetNotice(e)}})},o=i("46DA"),r=i.n(o);var c=function(t){i("v8LC")},u=i("VU/8")(n,r.a,!1,c,"data-v-c62c58ba",null);e.default=u.exports},v8LC:function(t,e){}});
//# sourceMappingURL=32.492a4e38d5809c6ffad4.js.map